
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to the SIMPA documentation! &#8212; SIMPA  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-the-simpa-documentation">
<h1>Welcome to the SIMPA documentation!<a class="headerlink" href="#welcome-to-the-simpa-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<a class="reference internal image-reference" href="_images/simpa_logo.png"><img alt="_images/simpa_logo.png" src="_images/simpa_logo.png" style="width: 12cm;" /></a>
</div>
<div class="section" id="readme">
<h1>README<a class="headerlink" href="#readme" title="Permalink to this headline">¶</a></h1>
<p>The Simulation and Image Processing for Photoacoustic Imaging (SIMPA) toolkit.</p>
<p><strong>(!) Alpha Version 0.4.0 (!)</strong></p>
<p>The toolkit is still under development and is thus not fully tested and may contain bugs.
Please report any issues that you find in our Issue Tracker: <a class="reference external" href="https://github.com/CAMI-DKFZ/simpa/issues">https://github.com/CAMI-DKFZ/simpa/issues</a>.
Also make sure to double check all value ranges of the optical and acoustic tissue properties
and to assess all simulation results for plausibility.</p>
<div class="section" id="simpa-install-instructions">
<h2>SIMPA Install Instructions<a class="headerlink" href="#simpa-install-instructions" title="Permalink to this headline">¶</a></h2>
<p>The recommended way to install simpa is a manual installation from the GitHub repository, please follow steps 1 - 3:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/CAMI-DKFZ/simpa.git</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code></p></li>
</ol>
<p>Now open a python instance in the ‘simpa’ folder that you have just downloaded. Make sure that you have your preferred
virtual environment activated</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">simpa</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> (for developement: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code>)</p></li>
<li><p>Test if the installation worked by using <code class="docutils literal notranslate"><span class="pre">python</span></code> followed by <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">simpa</span></code> then <code class="docutils literal notranslate"><span class="pre">exit()</span></code></p></li>
</ol>
<p>If no error messages arise, you are now setup to use simpa in your project.</p>
<p>You can also install simpa with pip. Simply run:</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">simpa</span></code></p>
<p>You also need to manually install the pytorch library to use all features of SIMPA.
To this end, use the pytorch website tool to figure out which version to install:
<code class="docutils literal notranslate"><span class="pre">https://pytorch.org/get-started/locally/</span></code></p>
</div>
<div class="section" id="building-the-documentation">
<h2>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>When the installation went fine and you want to make sure that you have the latest documentation
you should do the following steps in a command line:</p>
<ol class="arabic simple">
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">simpa</span></code> source directory (same level where the setup.py is in)</p></li>
<li><p>Execute the command <code class="docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">-b</span> <span class="pre">html</span> <span class="pre">-a</span> <span class="pre">docs/src</span> <span class="pre">docs</span></code></p></li>
<li><p>Find the <code class="docutils literal notranslate"><span class="pre">HTML</span></code> file in <code class="docutils literal notranslate"><span class="pre">docs/index.html</span></code></p></li>
</ol>
</div>
<div class="section" id="external-tools-installation-instructions">
<h2>External Tools installation instructions<a class="headerlink" href="#external-tools-installation-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mcx-optical-forward-model">
<h3>mcx (Optical Forward Model)<a class="headerlink" href="#mcx-optical-forward-model" title="Permalink to this headline">¶</a></h3>
<p>Either download suitable executables or build yourself from the following sources:</p>
<p><a class="reference external" href="http://mcx.space/">http://mcx.space/</a></p>
<p>In order to obtain access to all custom sources that we implemented, please build mcx yourself from the
following mcx Github fork:
<a class="reference external" href="https://www.github.com/jgroehl/mcx">https://www.github.com/jgroehl/mcx</a></p>
<p>For the installation, please follow the instructions from the original repository.
Please note that there might be compatiblity issues using mcx-cl with the MCX Adapter as this use case is not
being tested and supported by the SIMPA developers.</p>
</div>
<div class="section" id="k-wave-acoustic-forward-model">
<h3>k-Wave (Acoustic Forward Model)<a class="headerlink" href="#k-wave-acoustic-forward-model" title="Permalink to this headline">¶</a></h3>
<p>Please follow the following steps and use the k-Wave install instructions
for further (and much better) guidance under:</p>
<p><a class="reference external" href="http://www.k-wave.org/">http://www.k-wave.org/</a></p>
<ol class="arabic simple">
<li><p>Install MATLAB with the core and parallel computing toolboxes activated at the minimum.</p></li>
<li><p>Download the kWave toolbox</p></li>
<li><p>Add the kWave toolbox base path to the toolbox paths in MATLAB</p></li>
<li><p>Download the kWaveArray addition from the link given in this user forum post <a class="reference external" href="http://www.k-wave.org/forum/topic/alpha-version-of-kwavearray-off-grid-sources">http://www.k-wave.org/forum/topic/alpha-version-of-kwavearray-off-grid-sources</a></p></li>
<li><p>Add the kWaveArray folder to the toolbox paths in MATLAB as well</p></li>
<li><p>If wanted: Download the CPP and CUDA binary files and place them inthe k-Wave/binaries folder</p></li>
<li><p>Note down the system path to the <code class="docutils literal notranslate"><span class="pre">matlab</span></code> executable file.</p></li>
</ol>
</div>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The main use case for the simpa framework is the simulation of photoacoustic images.
However, it can also be used for image processing.</p>
<div class="section" id="simulating-photoacoustic-images">
<h3>Simulating photoacoustic images<a class="headerlink" href="#simulating-photoacoustic-images" title="Permalink to this headline">¶</a></h3>
<p>A basic example on how to use simpa in your project to run an optical forward simulation is given in the
samples/minimal_optical_simulation.py file.</p>
</div>
<div class="section" id="path-management">
<h3>Path Management<a class="headerlink" href="#path-management" title="Permalink to this headline">¶</a></h3>
<p>As a pipelining tool that serves as a communication layer between different numerical forward models and
processing tools, SIMPA needs to be configured with the paths to these tools on your local hard drive.
To this end, we have implemented the <code class="docutils literal notranslate"><span class="pre">PathManager</span></code> class that you can import to your project using
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">simpa.utils</span> <span class="pre">import</span> <span class="pre">PathManager</span></code>. The PathManager looks for a <code class="docutils literal notranslate"><span class="pre">path_config.env</span></code> file (just like the
one we provided in the <code class="docutils literal notranslate"><span class="pre">simpa_examples</span></code>) in the following places in this order:</p>
<ol class="arabic simple">
<li><p>The optional path you give the PathManager</p></li>
<li><p>Your $HOME$ directory</p></li>
<li><p>The current working directory</p></li>
<li><p>The SIMPA home directory path</p></li>
</ol>
</div>
</div>
<div class="section" id="how-to-contribute">
<h2>How to contribute<a class="headerlink" href="#how-to-contribute" title="Permalink to this headline">¶</a></h2>
<p>Please find a more detailed description of how to contribute as well as code style references in our <strong>developer_guide.md</strong></p>
<p>The SIMPA code is written and maintained on a closed git repository that is hosted on a server
of the German Cancer Research Center (DKFZ), Heidelberg, Germany and changes to the develop or master branch are mirrored on Github.
As such, only the current master and develop branch of the repository are open source.</p>
<p>To contribute to SIMPA, please fork the SIMPA github repository and create a pull request with a branch containing your
suggested changes. The core team developers will then review the suggested changes and integrate these into the code
base.</p>
<p>Please make sure that you have included unit tests for your code and that all previous tests still run through.</p>
<p>There is a regular SIMPA status meeting every Friday on even calendar weeks at 10:00 CET/CEST and you are very welcome to participate and
raise any issues or suggest new features. If you want to join this meeting, write one of the core developers (see developer_guide.md)</p>
<p>Please see the github guidelines for creating pull requests: <a class="reference external" href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests</a></p>
</div>
<div class="section" id="performance-profiling">
<h2>Performance profiling<a class="headerlink" href="#performance-profiling" title="Permalink to this headline">¶</a></h2>
<p>Do you wish to know which parts of the simulation pipeline cost the most amount of time?
If that is the case then you can use the following commands to profile the execution of your simulation script.
You simply need to replace the <code class="docutils literal notranslate"><span class="pre">myscript</span></code> name with your script name.</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">cProfile</span> <span class="pre">-o</span> <span class="pre">myscript.cprof</span> <span class="pre">myscript.py</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">pyprof2calltree</span> <span class="pre">-k</span> <span class="pre">-i</span> <span class="pre">myscript.cprof</span></code></p>
</div>
</div>
<div class="section" id="developer-guide">
<h1>Developer Guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<p>Dear SIMPA developers,
Dear person who wants to contribute to the SIMPA toolkit,</p>
<p>First of all: Thank you for your participation and help! It is much appreciated!
This Guide is meant to be used as a collection of How-To’s to contribute to the framework.
In case you have any questions, do not hesitate to get in touch with the members of the core development team:</p>
<p>Kris K. Dreher (<a class="reference external" href="mailto:k&#46;dreher&#37;&#52;&#48;dkfz-heidelberg&#46;de">k<span>&#46;</span>dreher<span>&#64;</span>dkfz-heidelberg<span>&#46;</span>de</a>)</p>
<p>Janek M. Groehl (<a class="reference external" href="mailto:janek&#46;grohl&#37;&#52;&#48;cruk&#46;cam&#46;ac&#46;uk">janek<span>&#46;</span>grohl<span>&#64;</span>cruk<span>&#46;</span>cam<span>&#46;</span>ac<span>&#46;</span>uk</a>)</p>
<div class="section" id="id1">
<h2>How to contribute<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The SIMPA code is written and maintained on a closed repository that is hosted on a server
of the German Cancer Research Center and changes to the develop or master branch are mirrored on Github
(<a class="reference external" href="https://github.com/CAMI-DKFZ/simpa/">https://github.com/CAMI-DKFZ/simpa/</a>). As such, only the current master and develop branch of the repository are
open source.</p>
<p>To make us aware of an issue, please create an issue on the SIMPA github repository.</p>
<p>To contribute to SIMPA, please fork the SIMPA github repository and create a pull request with a branch containing your
suggested changes. The core team developers will then review the suggested changes and integrate these into the code
base.</p>
<p>Please make sure that you have included unit tests for your code and that all previous tests still run through.</p>
<p>There is a regular SIMPA status meeting every Friday on even calendar weeks at 10:00 CET/CEST and you are
very welcome to participate and raise any issues or suggest new features. You can obtain the meeting links from the core
developer team.
We also have a Slack workspace that you can join if you are interested to contribute.</p>
<p>Please see the github guidelines for creating pull requests:
<a class="reference external" href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests</a></p>
</div>
<div class="section" id="coding-style">
<h2>Coding style<a class="headerlink" href="#coding-style" title="Permalink to this headline">¶</a></h2>
<p>When writing code for SIMPA, please use the PEP 8 python coding conventions (<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">https://www.python.org/dev/peps/pep-0008/</a>)
and consider using the following structures in your code in order to make a new
developer or someone external always know exactly what to expect.</p>
<ul class="simple">
<li><p>Classnames are written in camel-case notation <code class="docutils literal notranslate"><span class="pre">ClassName</span></code></p></li>
<li><p>Function names are written in small letter with <code class="docutils literal notranslate"><span class="pre">_</span></code> as the delimiter <code class="docutils literal notranslate"><span class="pre">function_name</span></code></p></li>
<li><p>Function parameters are always annotated with their type <code class="docutils literal notranslate"><span class="pre">arg1:</span> <span class="pre">type</span> <span class="pre">=</span> <span class="pre">default</span></code></p></li>
<li><p>Only use primitive types as defaults. If a non-primitive type is used, then the default should be <code class="docutils literal notranslate"><span class="pre">None</span></code> and
the parameter should be initialized in the beginning of a function.</p></li>
<li><p>A single line of code should not be longer than 120 characters.</p></li>
<li><p>Functions should follow the following simple structure:</p>
<ol class="arabic simple">
<li><p>Input validation (arguments all not <code class="docutils literal notranslate"><span class="pre">None</span></code>, correct type, and acceptable value ranges?)</p></li>
<li><p>Processing (clean handling of errors that might occur)</p></li>
<li><p>Output generation (sanity checking of the output before handing it off to the caller)</p></li>
</ol>
</li>
</ul>
</div>
<div class="section" id="documenting-your-code">
<h2>Documenting your code<a class="headerlink" href="#documenting-your-code" title="Permalink to this headline">¶</a></h2>
<p>Only documented code will appear in the sphinx generated documentation.</p>
<p>A class should be documented using the following syntax:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>class ClassName(Superclass):
    &quot;&quot;&quot;
    Explain how the class is used and what it does.
    &quot;&quot;&quot;
</pre></div>
</div>
<p>For functions, a lot of extra attributes can be added to the documentation:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>def function_name(self, arg1:type = default, arg2:type = default) -&gt; return_type:
    &quot;&quot;&quot;
    Explain how the function is used and what it does.

    :param arg1: type, value range, Null acceptable?
    :param arg2: type, value range, Null acceptable?
    :returns: type, value range, does it return Null?
    :raises ExceptionType: explain when and why this exception is raised
    &quot;&quot;&quot;
</pre></div>
</div>
</div>
<div class="section" id="adding-literature-absorption-spectra">
<h2>Adding literature absorption spectra<a class="headerlink" href="#adding-literature-absorption-spectra" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The central point, where absorption spectra are collected and handled is in
<code class="docutils literal notranslate"><span class="pre">simpa.utils.libraries.spectra_library.py</span></code>. The file comprises the class <code class="docutils literal notranslate"><span class="pre">AbsorptionSpectrumLibrary</span></code>, in which the
new absorption spectra can be added using the following two steps:</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>In the beginning of the class, there is a bunch of constants that define spectra using the <code class="docutils literal notranslate"><span class="pre">AbsorptionSpectrum</span></code>
class. Add a new constant here: <code class="docutils literal notranslate"><span class="pre">NEW_SPECTRUM</span> <span class="pre">=</span> <span class="pre">AbsorptionSpectrum(absorber_name,</span> <span class="pre">wavelengths,</span> <span class="pre">absorptions)</span></code>. By
convention, the naming of the constant should be the same as the <code class="docutils literal notranslate"><span class="pre">absorber_name</span></code> field. The <code class="docutils literal notranslate"><span class="pre">wavelengths</span></code> and
<code class="docutils literal notranslate"><span class="pre">absorptions</span></code> arrays must be of the same length and contain corresponding values.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of the <code class="docutils literal notranslate"><span class="pre">AbsorptionSpectrumLibrary</span></code> class, the class constants are added to an internal
list. This has the benefit of enabling the Library class to be iterable. Add your newly added constant field to
the list here.</p></li>
<li><p>Your absorption spectrum is now usable throughout all of simpa and is accessible using the <code class="docutils literal notranslate"><span class="pre">SPECTRAL_LIBRARY</span></code>
sngleton that can be imported using <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">simpa.utils</span> <span class="pre">import</span> <span class="pre">SPECTRAL_LIBRARY</span></code>.</p></li>
</ol>
</div>
</div>
<div class="section" id="class-references">
<h1>Class references<a class="headerlink" href="#class-references" title="Permalink to this headline">¶</a></h1>
<p>This description details the three principle modules
of the SIMPA toolkit and gives an insight into their constituents.
The core is concerned with providing interfaces for the
simulation tools, while the utils module contains many scripts
and classes to facilitate the use of the simulation pipeline.</p>
<div class="section" id="module-core">
<h2>Module: core<a class="headerlink" href="#module-core" title="Permalink to this headline">¶</a></h2>
<p>The purpose of the core module is to provide interfaces that facilitate the integration of toolboxes and code for
photoacoustic modeling into a single continuous pipeline.</p>
<span class="target" id="module-simpa.core.simulation"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="function">
<dt id="simpa.core.simulation.simulate">
<code class="sig-prename descclassname">simpa.core.simulation.</code><code class="sig-name descname">simulate</code><span class="sig-paren">(</span><em class="sig-param">simulation_pipeline: list</em>, <em class="sig-param">settings: simpa.utils.settings.Settings</em>, <em class="sig-param">digital_device_twin: simpa.core.device_digital_twins.digital_device_twin_base.DigitalDeviceTwinBase</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.simulation.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constitutes the staring point for the simulation pipeline
of the SIMPA toolkit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>simulation_pipeline</strong> – a list of callable functions</p></li>
<li><p><strong>settings</strong> – settings dictionary containing the simulation instructions</p></li>
<li><p><strong>digital_device_twin</strong> – a digital device twin of an imaging device as specified by the DigitalDeviceTwinBase
class.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – if one of the given parameters is not of the correct type</p></li>
<li><p><strong>AssertionError</strong> – if the digital device twin is not able to simulate the settings specification</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list with the save paths of the simulated data within the HDF5 file.</p>
</dd>
</dl>
</dd></dl>

<div class="section" id="volume-creation">
<h3>Volume creation<a class="headerlink" href="#volume-creation" title="Permalink to this headline">¶</a></h3>
<p>The core contribution of the SIMPA toolkit is the creation of in silico tissue-mimicking
phantoms. This feature is represented by the volume_creation module, that two main volume creation modules:</p>
<blockquote>
<div><ul class="simple">
<li><p>Model-based creation of volumes using a set of rules</p></li>
<li><p>Segmentation-based creation of volumes</p></li>
</ul>
</div></blockquote>
<span class="target" id="module-simpa.core.volume_creation_module"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.volume_creation_module.VolumeCreatorModuleBase">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.volume_creation_module.</code><code class="sig-name descname">VolumeCreatorModuleBase</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.volume_creation_module.VolumeCreatorModuleBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this class to define your own volume creation adapter.</p>
<dl class="method">
<dt id="simpa.core.volume_creation_module.VolumeCreatorModuleBase.create_simulation_volume">
<em class="property">abstract </em><code class="sig-name descname">create_simulation_volume</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.volume_creation_module.VolumeCreatorModuleBase.create_simulation_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will be called to create a simulation volume.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.core.volume_creation_module.VolumeCreatorModuleBase.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.volume_creation_module.VolumeCreatorModuleBase.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="module-simpa.core.volume_creation_module.volume_creation_module_model_based_adapter">
<span id="model-based-volume-creation"></span><h4>Model-based volume creation<a class="headerlink" href="#module-simpa.core.volume_creation_module.volume_creation_module_model_based_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.volume_creation_module.volume_creation_module_model_based_adapter.VolumeCreationModelModelBasedAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.volume_creation_module.volume_creation_module_model_based_adapter.</code><code class="sig-name descname">VolumeCreationModelModelBasedAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.volume_creation_module.volume_creation_module_model_based_adapter.VolumeCreationModelModelBasedAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>The model-based volume creator uses a set of rules how to generate structures
to create a simulation volume.
These structures are added to the dictionary and later combined by the algorithm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialise settings dictionaries</span>
<span class="n">simulation_settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
<span class="n">all_structures</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
<span class="n">structure</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>

<span class="c1"># Definition of en example structure.</span>
<span class="c1"># The concrete structure parameters will change depending on the</span>
<span class="c1"># structure type</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">muscle</span><span class="p">()</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">structure</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">HORIZONTAL_LAYER_STRUCTURE</span>

<span class="n">all_structures</span><span class="p">[</span><span class="s2">&quot;arbitrary_identifier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">structure</span>

<span class="n">simulation_settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURES</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_structures</span>

<span class="c1"># ...</span>
<span class="c1"># Define further simulation settings</span>
<span class="c1"># ...</span>

<span class="n">simulate</span><span class="p">(</span><span class="n">simulation_settings</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.volume_creation_module.volume_creation_module_model_based_adapter.VolumeCreationModelModelBasedAdapter.create_simulation_volume">
<code class="sig-name descname">create_simulation_volume</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.volume_creation_module.volume_creation_module_model_based_adapter.VolumeCreationModelModelBasedAdapter.create_simulation_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>This method creates a in silico respresentation of a tissue as described in the settings file that is given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>settings</strong> – a dictionary containing all relevant Tags for the simulation to be able to instantiate a tissue.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a path to a npz file containing characteristics of the simulated volume:
absorption, scattering, anisotropy, oxygenation, and a segmentation mask. All of these are given as 3d
numpy arrays.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter">
<span id="segmentation-based-volume-creation"></span><h4>Segmentation-based volume creation<a class="headerlink" href="#module-simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter.VolumeCreationModuleSegmentationBasedAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter.</code><code class="sig-name descname">VolumeCreationModuleSegmentationBasedAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter.VolumeCreationModuleSegmentationBasedAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>This volume creator expects a np.ndarray to be in the settigs
under the Tags.INPUT_SEGMENTATION_VOLUME tag and uses this array
together with a SegmentationClass mapping which is a dict defined in
the settings under Tags.SEGMENTATION_CLASS_MAPPING.</p>
<p>With this, an even greater utility is warranted.</p>
<dl class="method">
<dt id="simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter.VolumeCreationModuleSegmentationBasedAdapter.create_simulation_volume">
<code class="sig-name descname">create_simulation_volume</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.volume_creation_module.volume_creation_module_segmentation_based_adapter.VolumeCreationModuleSegmentationBasedAdapter.create_simulation_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will be called to create a simulation volume.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-simpa.core.optical_simulation_module">
<span id="optical-forward-modelling"></span><h3>Optical forward modelling<a class="headerlink" href="#module-simpa.core.optical_simulation_module" title="Permalink to this headline">¶</a></h3>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.optical_simulation_module.OpticalForwardModuleBase">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.optical_simulation_module.</code><code class="sig-name descname">OpticalForwardModuleBase</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.optical_simulation_module.OpticalForwardModuleBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this class as a base for implementations of optical forward models.</p>
<dl class="method">
<dt id="simpa.core.optical_simulation_module.OpticalForwardModuleBase.forward_model">
<em class="property">abstract </em><code class="sig-name descname">forward_model</code><span class="sig-paren">(</span><em class="sig-param">absorption_cm</em>, <em class="sig-param">scattering_cm</em>, <em class="sig-param">anisotropy</em>, <em class="sig-param">illumination_geometry</em>, <em class="sig-param">probe_position_mm</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.optical_simulation_module.OpticalForwardModuleBase.forward_model" title="Permalink to this definition">¶</a></dt>
<dd><p>A deriving class needs to implement this method according to its model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>absorption_cm</strong> – Absorption in units of per centimeter</p></li>
<li><p><strong>scattering_cm</strong> – Scattering in units of per centimeter</p></li>
<li><p><strong>anisotropy</strong> – Dimensionless scattering anisotropy</p></li>
<li><p><strong>illumination_geometry</strong> – A device that represents a detection geometry</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fluence in units of J/cm^2</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.optical_simulation_module.OpticalForwardModuleBase.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.optical_simulation_module.OpticalForwardModuleBase.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="module-simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter">
<span id="mcx-integration"></span><h4>mcx integration<a class="headerlink" href="#module-simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter.OpticalForwardModelMcxAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter.</code><code class="sig-name descname">OpticalForwardModelMcxAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter.OpticalForwardModelMcxAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements a bridge to the mcx framework to integrate mcx into SIMPA.
MCX is a GPU-enabled Monte-Carlo model simulation of photon transport in tissue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fang</span><span class="p">,</span> <span class="n">Qianqian</span><span class="p">,</span> <span class="ow">and</span> <span class="n">David</span> <span class="n">A</span><span class="o">.</span> <span class="n">Boas</span><span class="o">.</span> <span class="s2">&quot;Monte Carlo simulation of photon migration in 3D</span>
<span class="n">turbid</span> <span class="n">media</span> <span class="n">accelerated</span> <span class="n">by</span> <span class="n">graphics</span> <span class="n">processing</span> <span class="n">units</span><span class="o">.</span><span class="s2">&quot;</span>
<span class="n">Optics</span> <span class="n">express</span> <span class="mf">17.22</span> <span class="p">(</span><span class="mi">2009</span><span class="p">):</span> <span class="mi">20178</span><span class="o">-</span><span class="mf">20190.</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter.OpticalForwardModelMcxAdapter.forward_model">
<code class="sig-name descname">forward_model</code><span class="sig-paren">(</span><em class="sig-param">absorption_cm</em>, <em class="sig-param">scattering_cm</em>, <em class="sig-param">anisotropy</em>, <em class="sig-param">illumination_geometry</em>, <em class="sig-param">probe_position_mm</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.optical_simulation_module.optical_forward_model_mcx_adapter.OpticalForwardModelMcxAdapter.forward_model" title="Permalink to this definition">¶</a></dt>
<dd><p>A deriving class needs to implement this method according to its model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>absorption_cm</strong> – Absorption in units of per centimeter</p></li>
<li><p><strong>scattering_cm</strong> – Scattering in units of per centimeter</p></li>
<li><p><strong>anisotropy</strong> – Dimensionless scattering anisotropy</p></li>
<li><p><strong>illumination_geometry</strong> – A device that represents a detection geometry</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fluence in units of J/cm^2</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-simpa.core.acoustic_forward_module">
<span id="acoustic-forward-modelling"></span><h3>Acoustic forward modelling<a class="headerlink" href="#module-simpa.core.acoustic_forward_module" title="Permalink to this headline">¶</a></h3>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.acoustic_forward_module.AcousticForwardModelBaseAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.acoustic_forward_module.</code><code class="sig-name descname">AcousticForwardModelBaseAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.acoustic_forward_module.AcousticForwardModelBaseAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is the entry method for running an acoustic forward model.
It is invoked in the <em>simpa.core.simulation.simulate</em> method, but can also be called
individually for the purposes of performing acoustic forward modeling only or in a different context.</p>
<p>The concrete will be chosen based on the:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_MODEL</span>
</pre></div>
</div>
<p>tag in the settings dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>settings</strong> – The settings dictionary containing key-value pairs that determine the simulation.
Here, it must contain the Tags.ACOUSTIC_MODEL tag and any tags that might be required by the specific
acoustic model.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – an assertion error is raised if the Tags.ACOUSTIC_MODEL tag is not given or
points to an unknown acoustic forward model.</p>
</dd>
</dl>
<dl class="method">
<dt id="simpa.core.acoustic_forward_module.AcousticForwardModelBaseAdapter.forward_model">
<em class="property">abstract </em><code class="sig-name descname">forward_model</code><span class="sig-paren">(</span><em class="sig-param">detection_geometry</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.acoustic_forward_module.AcousticForwardModelBaseAdapter.forward_model" title="Permalink to this definition">¶</a></dt>
<dd><p>This method performs the acoustic forward modeling given the initial pressure
distribution and the acoustic tissue properties contained in the settings file.
A deriving class needs to implement this method according to its model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>time series pressure data</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.acoustic_forward_module.AcousticForwardModelBaseAdapter.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">digital_device_twin</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.acoustic_forward_module.AcousticForwardModelBaseAdapter.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this method to invoke the simulation process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array containing the time series pressure data per detection element</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="module-simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter">
<span id="k-wave-integration"></span><h4>k-Wave integration<a class="headerlink" href="#module-simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter.AcousticForwardModelKWaveAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter.</code><code class="sig-name descname">AcousticForwardModelKWaveAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter.AcousticForwardModelKWaveAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>The KwaveAcousticForwardModel adapter enables acoustic simulations to be run with the
k-wave MATLAB toolbox. k-Wave is a free toolbox (<a class="reference external" href="http://www.k-wave.org/">http://www.k-wave.org/</a>) developed by Bradley Treeby
and Ben Cox (University College London) and Jiri Jaros (Brno University of Technology).</p>
<p>In order to use this toolbox, MATLAB needs to be installed on your system and the path to the
MATLAB binary needs to be specified in the settings dictionary.</p>
<p>In order to use the toolbox from with SIMPA, a number of parameters have to be specified in the
settings dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">initial</span> <span class="n">pressure</span> <span class="n">distribution</span><span class="p">:</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_INITIAL_PRESSURE</span>
<span class="n">Acoustic</span> <span class="n">tissue</span> <span class="n">properties</span><span class="p">:</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_SPEED_OF_SOUND</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_DENSITY</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_ALPHA_COEFF</span>
<span class="n">The</span> <span class="n">digital</span> <span class="n">twin</span> <span class="n">of</span> <span class="n">the</span> <span class="n">imaging</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DIGITAL_DEVICE</span>
<span class="n">Other</span> <span class="n">parameters</span><span class="p">:</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PERFORM_UPSAMPLING</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">UPSCALE_FACTOR</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_ALPHA_POWER</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">GPU</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLInside</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLAlpha</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PlotPML</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECORDMOVIE</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">MOVIENAME</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_LOG_SCALE</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SENSOR_DIRECTIVITY_PATTERN</span>
</pre></div>
</div>
<p>Many of these will be set automatically by SIMPA, but you may use the
simpa.utils.settings_generator convenience methods to generate settings files that contain
sensible defaults for these parameters.</p>
<p>Please also refer to the simpa_examples scripts to see how the settings file can be
parametrized successfully.</p>
<dl class="method">
<dt id="simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter.AcousticForwardModelKWaveAdapter.forward_model">
<code class="sig-name descname">forward_model</code><span class="sig-paren">(</span><em class="sig-param">detection_geometry</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.acoustic_forward_module.acoustic_forward_module_k_wave_adapter.AcousticForwardModelKWaveAdapter.forward_model" title="Permalink to this definition">¶</a></dt>
<dd><p>This method performs the acoustic forward modeling given the initial pressure
distribution and the acoustic tissue properties contained in the settings file.
A deriving class needs to implement this method according to its model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>time series pressure data</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-simpa.core.reconstruction_module">
<span id="image-reconstruction"></span><h3>Image reconstruction<a class="headerlink" href="#module-simpa.core.reconstruction_module" title="Permalink to this headline">¶</a></h3>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.reconstruction_module.ReconstructionAdapterBase">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.reconstruction_module.</code><code class="sig-name descname">ReconstructionAdapterBase</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.ReconstructionAdapterBase" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is the main entry point to perform image reconstruction using the SIMPA toolkit.
All information necessary for the respective reconstruction method must be contained in the
respective settings dictionary.</p>
<dl class="method">
<dt id="simpa.core.reconstruction_module.ReconstructionAdapterBase.reconstruction_algorithm">
<em class="property">abstract </em><code class="sig-name descname">reconstruction_algorithm</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.reconstruction_module.ReconstructionAdapterBase.reconstruction_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>A deriving class needs to implement this method according to its model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_series_sensor_data</strong> – the time series sensor data</p></li>
<li><p><strong>detection_geometry</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a reconstructed photoacoustic image</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.reconstruction_module.ReconstructionAdapterBase.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.ReconstructionAdapterBase.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.reconstruction_module.reconstruction_utils"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_utils.apply_b_mode">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_utils.</code><code class="sig-name descname">apply_b_mode</code><span class="sig-paren">(</span><em class="sig-param">data: numpy.ndarray = None</em>, <em class="sig-param">method: str = None</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_utils.apply_b_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies B-Mode specified method to data. Method is either
envelope detection using hilbert transform (Tags.RECONSTRUCTION_BMODE_METHOD_HILBERT_TRANSFORM),
absolute value (Tags.RECONSTRUCTION_BMODE_METHOD_ABS) or
none if nothing is specified is performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – (numpy array) data used for applying B-Mode method</p></li>
<li><p><strong>method</strong> – (str) Tags.RECONSTRUCTION_BMODE_METHOD_HILBERT_TRANSFORM or Tags.RECONSTRUCTION_BMODE_METHOD_ABS</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(numpy array) data with B-Mode method applied, all</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_utils.bandpass_filtering">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_utils.</code><code class="sig-name descname">bandpass_filtering</code><span class="sig-paren">(</span><em class="sig-param">data: None._VariableFunctionsClass.tensor = None</em>, <em class="sig-param">time_spacing_in_ms: float = None</em>, <em class="sig-param">cutoff_lowpass: int = 8000000</em>, <em class="sig-param">cutoff_highpass: int = 100000</em>, <em class="sig-param">tukey_alpha: float = 0.5</em><span class="sig-paren">)</span> &#x2192; None._VariableFunctionsClass.tensor<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_utils.bandpass_filtering" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a bandpass filter with cutoff values at <cite>cutoff_lowpass</cite> and <cite>cutoff_highpass</cite> MHz 
and a tukey window with alpha value of <cite>tukey_alpha</cite> inbetween on the <cite>data</cite> in Fourier space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – (torch tensor) data to be filtered</p></li>
<li><p><strong>time_spacing_in_ms</strong> – (float) time spacing in milliseconds, e.g. 2.5e-5</p></li>
<li><p><strong>cutoff_lowpass</strong> – (int) Signal above this value will be ignored (in MHz)</p></li>
<li><p><strong>cutoff_highpass</strong> – (int) Signal below this value will be ignored (in MHz)</p></li>
<li><p><strong>tukey_alpha</strong> – (float) transition value between 0 (rectangular) and 1 (Hann window)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(torch tensor) filtered data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_utils.get_apodization_factor">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_utils.</code><code class="sig-name descname">get_apodization_factor</code><span class="sig-paren">(</span><em class="sig-param">apodization_method: str = 'BoxApodization'</em>, <em class="sig-param">dimensions: tuple = None</em>, <em class="sig-param">n_sensor_elements=None</em>, <em class="sig-param">device: torch.device = 'cpu'</em><span class="sig-paren">)</span> &#x2192; None._VariableFunctionsClass.tensor<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_utils.get_apodization_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct apodization factors according to <cite>apodization_method</cite> [hann, hamming or box apodization (default)] 
for given dimensions and <cite>n_sensor_elements</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apodization_method</strong> – (str) Apodization method, one of Tags.RECONSTRUCTION_APODIZATION_HANN, 
Tags.RECONSTRUCTION_APODIZATION_HAMMING and Tags.RECONSTRUCTION_APODIZATION_BOX (default)</p></li>
<li><p><strong>dimensions</strong> – (tuple) size of each dimension of reconstructed image as int, might have 2 or 3 entries.</p></li>
<li><p><strong>n_sensor_elements</strong> – (int) number of sensor elements</p></li>
<li><p><strong>device</strong> – (torch device) PyTorch tensor device</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(torch tensor) tensor with apodization factors which can be multipied with DAS values</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_utils.reconstruction_mode_transformation">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_utils.</code><code class="sig-name descname">reconstruction_mode_transformation</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data: None._VariableFunctionsClass.tensor = None</em>, <em class="sig-param">mode: str = 'pressure'</em><span class="sig-paren">)</span> &#x2192; None._VariableFunctionsClass.tensor<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_utils.reconstruction_mode_transformation" title="Permalink to this definition">¶</a></dt>
<dd><p>Transformes <cite>time_series_sensor_data</cite> for other modes, for example <cite>Tags.RECONSTRUCTION_MODE_DIFFERENTIAL</cite>.
Default mode is <cite>Tags.RECONSTRUCTION_MODE_PRESSURE</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_series_sensor_data</strong> – (torch tensor) Time series data to be transformed</p></li>
<li><p><strong>mode</strong> – (str) reconstruction mode: Tags.RECONSTRUCTION_MODE_PRESSURE (default)
or Tags.RECONSTRUCTION_MODE_DIFFERENTIAL</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(torch tensor) potentially transformed tensor</p>
</dd>
</dl>
</dd></dl>

<div class="section" id="module-simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter">
<span id="backprojection"></span><h4>Backprojection<a class="headerlink" href="#module-simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.ImageReconstructionModuleDelayAndSumAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.</code><code class="sig-name descname">ImageReconstructionModuleDelayAndSumAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.ImageReconstructionModuleDelayAndSumAdapter" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.ImageReconstructionModuleDelayAndSumAdapter.reconstruction_algorithm">
<code class="sig-name descname">reconstruction_algorithm</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.ImageReconstructionModuleDelayAndSumAdapter.reconstruction_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the Delay and Sum beamforming algorithm [1] to the time series sensor data (2D numpy array where the
first dimension corresponds to the sensor elements and the second to the recorded time steps) with the given
beamforming settings (dictionary).
A reconstructed image (2D numpy array) is returned.
This implementation uses PyTorch Tensors to perform computations and is able to run on GPUs.</p>
<p>[1] T. Kirchner et al. 2018, “Signed Real-Time Delay Multiply and Sum Beamforming for Multispectral
Photoacoustic Imaging”, <a class="reference external" href="https://doi.org/10.3390/jimaging4100121">https://doi.org/10.3390/jimaging4100121</a></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.reconstruct_delay_and_sum_pytorch">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.</code><code class="sig-name descname">reconstruct_delay_and_sum_pytorch</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data: numpy.ndarray</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em>, <em class="sig-param">settings: dict = None</em>, <em class="sig-param">sound_of_speed: int = 1540</em>, <em class="sig-param">time_spacing: float = 2.5e-08</em>, <em class="sig-param">sensor_spacing: float = 0.1</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_delay_and_sum_adapter.reconstruct_delay_and_sum_pytorch" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for reconstructing time series data using Delay and Sum algorithm implemented in PyTorch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_series_sensor_data</strong> – (2D numpy array) sensor data of shape (sensor elements, time steps)</p></li>
<li><p><strong>detection_geometry</strong> – The DetectionGeometryBase that should be used to reconstruct the given time series data</p></li>
<li><p><strong>settings</strong> – (dict) settings dictionary: by default there is none and the other parameters are used instead,
but if parameters are given in the settings those will be used instead of parsed arguments)</p></li>
<li><p><strong>sound_of_speed</strong> – (int) speed of sound in medium in meters per second (default: 1540 m/s)</p></li>
<li><p><strong>time_spacing</strong> – (float) time between sampling points in seconds (default: 2.5e-8 s which is equal to 40 MHz)</p></li>
<li><p><strong>sensor_spacing</strong> – (float) space between sensor elements in millimeters (default: 0.1 mm)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(2D numpy array) reconstructed image as 2D numpy array</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter">
<span id="delay-multiply-and-sum-dmas"></span><h4>Delay-Multiply-And-Sum (DMAS)<a class="headerlink" href="#module-simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.ImageReconstructionModuleDelayMultiplyAndSumAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.</code><code class="sig-name descname">ImageReconstructionModuleDelayMultiplyAndSumAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.ImageReconstructionModuleDelayMultiplyAndSumAdapter" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.ImageReconstructionModuleDelayMultiplyAndSumAdapter.reconstruction_algorithm">
<code class="sig-name descname">reconstruction_algorithm</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.ImageReconstructionModuleDelayMultiplyAndSumAdapter.reconstruction_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the Delay Multiply and Sum beamforming algorithm [1] to the time series sensor data (2D numpy array where the
first dimension corresponds to the sensor elements and the second to the recorded time steps) with the given
beamforming settings (dictionary).
A reconstructed image (2D numpy array) is returned.
This implementation uses PyTorch Tensors to perform computations and is able to run on GPUs.</p>
<p>[1] T. Kirchner et al. 2018, “Signed Real-Time Delay Multiply and Sum Beamforming for Multispectral
Photoacoustic Imaging”, <a class="reference external" href="https://doi.org/10.3390/jimaging4100121">https://doi.org/10.3390/jimaging4100121</a></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.reconstruct_delay_multiply_and_sum_pytorch">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.</code><code class="sig-name descname">reconstruct_delay_multiply_and_sum_pytorch</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data: numpy.ndarray</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em>, <em class="sig-param">settings: dict = None</em>, <em class="sig-param">sound_of_speed: int = 1540</em>, <em class="sig-param">time_spacing: float = 2.5e-08</em>, <em class="sig-param">sensor_spacing: float = 0.1</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_delay_multiply_and_sum_adapter.reconstruct_delay_multiply_and_sum_pytorch" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for reconstructing time series data using Delay and Sum algorithm implemented in PyTorch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_series_sensor_data</strong> – (2D numpy array) sensor data of shape (sensor elements, time steps)</p></li>
<li><p><strong>detection_geometry</strong> – The DetectioNGeometryBase to use for the reconstruction of the given time series data</p></li>
<li><p><strong>settings</strong> – (dict) settings dictionary: by default there is none and the other parameters are used instead,
but if parameters are given in the settings those will be used instead of parsed arguments)</p></li>
<li><p><strong>sound_of_speed</strong> – (int) speed of sound in medium in meters per second (default: 1540 m/s)</p></li>
<li><p><strong>time_spacing</strong> – (float) time between sampling points in seconds (default: 2.5e-8 s which is equal to 40 MHz)</p></li>
<li><p><strong>sensor_spacing</strong> – (float) space between sensor elements in millimeters (default: 0.1 mm)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(2D numpy array) reconstructed image as 2D numpy array</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter">
<span id="signed-delay-multiply-and-sum-sdmas"></span><h4>signed Delay-Multiply-And-Sum (sDMAS)<a class="headerlink" href="#module-simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.ImageReconstructionModuleSignedDelayMultiplyAndSumAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.</code><code class="sig-name descname">ImageReconstructionModuleSignedDelayMultiplyAndSumAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.ImageReconstructionModuleSignedDelayMultiplyAndSumAdapter" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.ImageReconstructionModuleSignedDelayMultiplyAndSumAdapter.reconstruction_algorithm">
<code class="sig-name descname">reconstruction_algorithm</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.ImageReconstructionModuleSignedDelayMultiplyAndSumAdapter.reconstruction_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the signed Delay Multiply and Sum beamforming algorithm [1] to the time series sensor data
(2D numpy array where the
first dimension corresponds to the sensor elements and the second to the recorded time steps) with the given
beamforming settings (dictionary).
A reconstructed image (2D numpy array) is returned.
This implementation uses PyTorch Tensors to perform computations and is able to run on GPUs.</p>
<p>[1] T. Kirchner et al. 2018, “Signed Real-Time Delay Multiply and Sum Beamforming for Multispectral
Photoacoustic Imaging”, <a class="reference external" href="https://doi.org/10.3390/jimaging4100121">https://doi.org/10.3390/jimaging4100121</a></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.reconstruct_signed_delay_multiply_and_sum_pytorch">
<code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.</code><code class="sig-name descname">reconstruct_signed_delay_multiply_and_sum_pytorch</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data: numpy.ndarray</em>, <em class="sig-param">detection_geometry: simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase</em>, <em class="sig-param">settings: dict = None</em>, <em class="sig-param">sound_of_speed: int = 1540</em>, <em class="sig-param">time_spacing: float = 2.5e-08</em>, <em class="sig-param">sensor_spacing: float = 0.1</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_signed_delay_multiply_and_sum_adapter.reconstruct_signed_delay_multiply_and_sum_pytorch" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for reconstructing time series data using Delay and Sum algorithm implemented in PyTorch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_series_sensor_data</strong> – (2D numpy array) sensor data of shape (sensor elements, time steps)</p></li>
<li><p><strong>settings</strong> – (dict) settings dictionary: by default there is none and the other parameters are used instead,
but if parameters are given in the settings those will be used instead of parsed arguments)</p></li>
<li><p><strong>sound_of_speed</strong> – (int) speed of sound in medium in meters per second (default: 1540 m/s)</p></li>
<li><p><strong>time_spacing</strong> – (float) time between sampling points in seconds (default: 2.5e-8 s which is equal to 40 MHz)</p></li>
<li><p><strong>sensor_spacing</strong> – (float) space between sensor elements in millimeters (default: 0.1 mm)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(2D numpy array) reconstructed image as 2D numpy array</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter">
<span id="time-reversal"></span><h4>Time Reversal<a class="headerlink" href="#module-simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.</code><code class="sig-name descname">ReconstructionModuleTimeReversalAdapter</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>The time reversal adapter includes the time reversal reconstruction
algorithm implemented by the k-Wave toolkit into SIMPA.</p>
<p>Time reversal reconstruction uses the time series data and computes the forward simulation model
backwards in time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Treeby</span><span class="p">,</span> <span class="n">Bradley</span> <span class="n">E</span><span class="o">.</span><span class="p">,</span> <span class="n">Edward</span> <span class="n">Z</span><span class="o">.</span> <span class="n">Zhang</span><span class="p">,</span> <span class="ow">and</span> <span class="n">Benjamin</span> <span class="n">T</span><span class="o">.</span> <span class="n">Cox</span><span class="o">.</span>
<span class="s2">&quot;Photoacoustic tomography in absorbing acoustic media using</span>
<span class="n">time</span> <span class="n">reversal</span><span class="o">.</span><span class="s2">&quot; Inverse Problems 26.11 (2010): 115003.</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter.get_acoustic_properties">
<code class="sig-name descname">get_acoustic_properties</code><span class="sig-paren">(</span><em class="sig-param">input_data: dict</em>, <em class="sig-param">detection_geometry</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter.get_acoustic_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>This method extracts the acoustic tissue properties from the settings dictionary and
amends the information to the input_data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> – a dictionary containing the information needed for time reversal.</p></li>
<li><p><strong>detection_geometry</strong> – PA device that is used for reconstruction</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter.reconstruction_algorithm">
<code class="sig-name descname">reconstruction_algorithm</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data</em>, <em class="sig-param">detection_geometry</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter.reconstruction_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>A deriving class needs to implement this method according to its model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_series_sensor_data</strong> – the time series sensor data</p></li>
<li><p><strong>detection_geometry</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a reconstructed photoacoustic image</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter.reorder_time_series_data">
<code class="sig-name descname">reorder_time_series_data</code><span class="sig-paren">(</span><em class="sig-param">time_series_sensor_data</em>, <em class="sig-param">detection_geometry</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.reconstruction_module.reconstruction_module_time_reversal_adapter.ReconstructionModuleTimeReversalAdapter.reorder_time_series_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reorders the time series data to match the order that is assumed by kwave
during image reconstruction with TimeReversal.</p>
<p>The main issue here is, that, while forward modelling allows for the definition of
3D cuboid bounding boxes for the detector elements, TimeReversal does not implement
this feature.
Instead, a binary mask is given and these are indexed in a column-row-wise manner in
the output.
The default np.argsort() method does not yield the same result as expected by
k-Wave. Hence, this workaround.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-simpa.core.processing_components">
<span id="processing-components"></span><h3>Processing Components<a class="headerlink" href="#module-simpa.core.processing_components" title="Permalink to this headline">¶</a></h3>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.processing_components.ProcessingComponent">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.processing_components.</code><code class="sig-name descname">ProcessingComponent</code><span class="sig-paren">(</span><em class="sig-param">global_settings</em>, <em class="sig-param">component_settings_key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.ProcessingComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a simulation component, which can be used to pre- or post-process simulation data.</p>
</dd></dl>

<div class="section" id="module-simpa.core.processing_components.noise.gamma_noise">
<span id="noise-models"></span><h4>Noise Models<a class="headerlink" href="#module-simpa.core.processing_components.noise.gamma_noise" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.processing_components.noise.gamma_noise.GammaNoiseProcessingComponent">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.processing_components.noise.gamma_noise.</code><code class="sig-name descname">GammaNoiseProcessingComponent</code><span class="sig-paren">(</span><em class="sig-param">global_settings</em>, <em class="sig-param">component_settings_key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.gamma_noise.GammaNoiseProcessingComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Gaussian noise to the defined data field.
The noise will be applied to all wavelengths.</p>
<p>Component Settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_SHAPE</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_SCALE</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_ADDITIVE</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span> <span class="p">(</span><span class="n">required</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.processing_components.noise.gamma_noise.GammaNoiseProcessingComponent.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.gamma_noise.GammaNoiseProcessingComponent.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.processing_components.noise.gaussian_noise"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.processing_components.noise.gaussian_noise.GaussianNoiseProcessingComponent">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.processing_components.noise.gaussian_noise.</code><code class="sig-name descname">GaussianNoiseProcessingComponent</code><span class="sig-paren">(</span><em class="sig-param">global_settings</em>, <em class="sig-param">component_settings_key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.gaussian_noise.GaussianNoiseProcessingComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Gaussian noise to the defined data field.
The noise will be applied to all wavelengths.
Component Settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MEAN</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_STD</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_ADDITIVE</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_NON_NEGATIVITY_CONSTRAINT</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span> <span class="p">(</span><span class="n">required</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.processing_components.noise.gaussian_noise.GaussianNoiseProcessingComponent.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.gaussian_noise.GaussianNoiseProcessingComponent.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.processing_components.noise.poisson_noise"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.processing_components.noise.poisson_noise.PoissonNoiseProcessingComponent">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.processing_components.noise.poisson_noise.</code><code class="sig-name descname">PoissonNoiseProcessingComponent</code><span class="sig-paren">(</span><em class="sig-param">global_settings</em>, <em class="sig-param">component_settings_key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.poisson_noise.PoissonNoiseProcessingComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Gaussian noise to the defined data field.
The noise will be applied to all wavelengths.</p>
<p>Component Settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MEAN</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_ADDITIVE</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span> <span class="p">(</span><span class="n">required</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.processing_components.noise.poisson_noise.PoissonNoiseProcessingComponent.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.poisson_noise.PoissonNoiseProcessingComponent.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.processing_components.noise.salt_and_pepper_noise"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.processing_components.noise.salt_and_pepper_noise.SaltAndPepperNoiseProcessingComponent">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.processing_components.noise.salt_and_pepper_noise.</code><code class="sig-name descname">SaltAndPepperNoiseProcessingComponent</code><span class="sig-paren">(</span><em class="sig-param">global_settings</em>, <em class="sig-param">component_settings_key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.salt_and_pepper_noise.SaltAndPepperNoiseProcessingComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies salt and pepper noise to the defined data field.
The noise will be applied to all wavelengths.</p>
<p>The noise will be 50% salt and 50% pepper noise, but both can be set to the same value using the
NOISE_MIN and NOISE_MAX fields.</p>
<p>Component Settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MIN</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">data_field</span><span class="p">))</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MAX</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">data_field</span><span class="p">))</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_FREQUENCY</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span> <span class="p">(</span><span class="n">required</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.processing_components.noise.salt_and_pepper_noise.SaltAndPepperNoiseProcessingComponent.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.salt_and_pepper_noise.SaltAndPepperNoiseProcessingComponent.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.processing_components.noise.uniform_noise"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.processing_components.noise.uniform_noise.UniformNoiseProcessingComponent">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.processing_components.noise.uniform_noise.</code><code class="sig-name descname">UniformNoiseProcessingComponent</code><span class="sig-paren">(</span><em class="sig-param">global_settings</em>, <em class="sig-param">component_settings_key: str</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.uniform_noise.UniformNoiseProcessingComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies uniform noise to the defined data field.
The noise will be applied to all wavelengths.</p>
<p>The noise will be uniformly distributed between [min, max[.</p>
<p>Component Settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MIN</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MAX</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_ADDITIVE</span><span class="p">)</span>
<span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span> <span class="p">(</span><span class="n">required</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.processing_components.noise.uniform_noise.UniformNoiseProcessingComponent.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">device</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.processing_components.noise.uniform_noise.UniformNoiseProcessingComponent.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the respective simulation module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>digital_device_twin</strong> – The digital twin that can be used by the digital device_twin.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="digital-device-twins">
<h3>Digital device twins<a class="headerlink" href="#digital-device-twins" title="Permalink to this headline">¶</a></h3>
<p>At every step along the forward simulation, knowledge of the photoacoustic device that is used for the measurements is
needed. This is important to reflect characteristic artefacts and challenges for the respective device.</p>
<p>To this end, we have included digital twins of commonly used devices into the SIMPA core. Additionally, we have included
detection geometries and illumination geometries that can be used to create custom photoacoustic devices for simulation.</p>
<div class="section" id="module-simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base">
<span id="detection-geometries"></span><h4>Detection Geometries<a class="headerlink" href="#module-simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.</code><code class="sig-name descname">DetectionGeometryBase</code><span class="sig-paren">(</span><em class="sig-param">number_detector_elements</em>, <em class="sig-param">detector_element_width_mm</em>, <em class="sig-param">detector_element_length_mm</em>, <em class="sig-param">center_frequency_hz</em>, <em class="sig-param">bandwidth_percent</em>, <em class="sig-param">sampling_frequency_mhz</em>, <em class="sig-param">probe_width_mm</em>, <em class="sig-param">device_position_mm: numpy.ndarray = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a detector geometry.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_orientations">
<em class="property">abstract </em><code class="sig-name descname">get_detector_element_orientations</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_orientations" title="Permalink to this definition">¶</a></dt>
<dd><p>This method yields a normalised orientation vector for each detection element. The length of
this vector is the same as the one obtained via the position methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_base_mm</span>
<span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a numpy array that contains normalised orientation vectors for each detection element</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_positions_accounting_for_device_position_mm">
<code class="sig-name descname">get_detector_element_positions_accounting_for_device_position_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_positions_accounting_for_device_position_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_base_mm</span>
</pre></div>
</div>
<p>This method returns the absolute positions of the detection elements relative to the device
position in the imaged volume, where the device position is defined by the following tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">DIGITAL_DEVICE_POSITION</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A numpy array containing the coordinates of the detection elements</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_positions_accounting_for_field_of_view">
<code class="sig-name descname">get_detector_element_positions_accounting_for_field_of_view</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_positions_accounting_for_field_of_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_base_mm</span>
</pre></div>
</div>
<p>This method returns the absolute positions of the detection elements relative to the device
position in the imaged volume, where the device position is defined by the following tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tags</span><span class="o">.</span><span class="n">DIGITAL_DEVICE_POSITION</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A numpy array containing the coordinates of the detection elements</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_positions_base_mm">
<em class="property">abstract </em><code class="sig-name descname">get_detector_element_positions_base_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.detection_geometry_base.DetectionGeometryBase.get_detector_element_positions_base_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the abstract positions of the detection elements in an arbitraty coordinate system.
Typically, the center of the field of view is defined as the origin.</p>
<p>To obtain the positions in an interpretable coordinate system, please use the other method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A numpy array containing the position vestors of the detection elements.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.detection_geometries.curved_array"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.detection_geometries.curved_array.</code><code class="sig-name descname">CurvedArrayDetectionGeometry</code><span class="sig-paren">(</span><em class="sig-param">pitch_mm=0.5</em>, <em class="sig-param">radius_mm=40</em>, <em class="sig-param">number_detector_elements=256</em>, <em class="sig-param">detector_element_width_mm=0.24</em>, <em class="sig-param">detector_element_length_mm=13</em>, <em class="sig-param">center_frequency_hz=3960000.0</em>, <em class="sig-param">bandwidth_percent=55</em>, <em class="sig-param">sampling_frequency_mhz=40</em>, <em class="sig-param">angular_origin_offset=3.141592653589793</em>, <em class="sig-param">device_position_mm=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a digital twin of a ultrasound detection device
with a curved detection geometry. The origin for this device is the center (focus) of the curved array.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.check_settings_prerequisites">
<code class="sig-name descname">check_settings_prerequisites</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.check_settings_prerequisites" title="Permalink to this definition">¶</a></dt>
<dd><p>It might be that certain device geometries need a certain dimensionality of the simulated PAI volume, or that
it required the existence of certain Tags in the global global_settings.
To this end, a  PAI device should use this method to inform the user about a mismatch of the desired device and
throw a ValueError if that is the case.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – raises a value error if the prerequisites are not matched.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the prerequisites are met, False if they are not met, but no exception has been raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.get_detector_element_orientations">
<code class="sig-name descname">get_detector_element_orientations</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.get_detector_element_orientations" title="Permalink to this definition">¶</a></dt>
<dd><p>This method yields a normalised orientation vector for each detection element. The length of
this vector is the same as the one obtained via the position methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_base_mm</span>
<span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a numpy array that contains normalised orientation vectors for each detection element</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.get_detector_element_positions_base_mm">
<code class="sig-name descname">get_detector_element_positions_base_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.get_detector_element_positions_base_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the abstract positions of the detection elements in an arbitraty coordinate system.
Typically, the center of the field of view is defined as the origin.</p>
<p>To obtain the positions in an interpretable coordinate system, please use the other method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A numpy array containing the position vestors of the detection elements.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.curved_array.CurvedArrayDetectionGeometry.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.detection_geometries.linear_array"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.detection_geometries.linear_array.</code><code class="sig-name descname">LinearArrayDetectionGeometry</code><span class="sig-paren">(</span><em class="sig-param">pitch_mm=0.5</em>, <em class="sig-param">number_detector_elements=100</em>, <em class="sig-param">detector_element_width_mm=0.24</em>, <em class="sig-param">detector_element_length_mm=0.5</em>, <em class="sig-param">center_frequency_hz=3960000.0</em>, <em class="sig-param">bandwidth_percent=55</em>, <em class="sig-param">sampling_frequency_mhz=40</em>, <em class="sig-param">device_position_mm: numpy.ndarray = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a digital twin of a ultrasound detection device
with a linear detection geometry. The origin for this device is the center of the linear array, so approximately
the position of the (number_detector_elements/2)th detector element.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.check_settings_prerequisites">
<code class="sig-name descname">check_settings_prerequisites</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.check_settings_prerequisites" title="Permalink to this definition">¶</a></dt>
<dd><p>It might be that certain device geometries need a certain dimensionality of the simulated PAI volume, or that
it required the existence of certain Tags in the global global_settings.
To this end, a  PAI device should use this method to inform the user about a mismatch of the desired device and
throw a ValueError if that is the case.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – raises a value error if the prerequisites are not matched.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the prerequisites are met, False if they are not met, but no exception has been raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.get_detector_element_orientations">
<code class="sig-name descname">get_detector_element_orientations</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.get_detector_element_orientations" title="Permalink to this definition">¶</a></dt>
<dd><p>This method yields a normalised orientation vector for each detection element. The length of
this vector is the same as the one obtained via the position methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_base_mm</span>
<span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a numpy array that contains normalised orientation vectors for each detection element</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.get_detector_element_positions_base_mm">
<code class="sig-name descname">get_detector_element_positions_base_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.get_detector_element_positions_base_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the abstract positions of the detection elements in an arbitraty coordinate system.
Typically, the center of the field of view is defined as the origin.</p>
<p>To obtain the positions in an interpretable coordinate system, please use the other method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A numpy array containing the position vestors of the detection elements.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.linear_array.LinearArrayDetectionGeometry.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.detection_geometries.planar_array"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.detection_geometries.planar_array.</code><code class="sig-name descname">PlanarArrayDetectionGeometry</code><span class="sig-paren">(</span><em class="sig-param">pitch_mm=0.5</em>, <em class="sig-param">number_detector_elements_x=100</em>, <em class="sig-param">number_detector_elements_y=100</em>, <em class="sig-param">detector_element_width_mm=0.24</em>, <em class="sig-param">detector_element_length_mm=0.5</em>, <em class="sig-param">center_frequency_hz=3960000.0</em>, <em class="sig-param">bandwidth_percent=55</em>, <em class="sig-param">sampling_frequency_mhz=40</em>, <em class="sig-param">device_position_mm: numpy.ndarray = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a digital twin of a ultrasound detection device
with a linear detection geometry. The origin for this device is the center of the planar array.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.check_settings_prerequisites">
<code class="sig-name descname">check_settings_prerequisites</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.check_settings_prerequisites" title="Permalink to this definition">¶</a></dt>
<dd><p>It might be that certain device geometries need a certain dimensionality of the simulated PAI volume, or that
it required the existence of certain Tags in the global global_settings.
To this end, a  PAI device should use this method to inform the user about a mismatch of the desired device and
throw a ValueError if that is the case.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – raises a value error if the prerequisites are not matched.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the prerequisites are met, False if they are not met, but no exception has been raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.get_detector_element_orientations">
<code class="sig-name descname">get_detector_element_orientations</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.get_detector_element_orientations" title="Permalink to this definition">¶</a></dt>
<dd><p>This method yields a normalised orientation vector for each detection element. The length of
this vector is the same as the one obtained via the position methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_base_mm</span>
<span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a numpy array that contains normalised orientation vectors for each detection element</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.get_detector_element_positions_base_mm">
<code class="sig-name descname">get_detector_element_positions_base_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.get_detector_element_positions_base_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the abstract positions of the detection elements in an arbitraty coordinate system.
Typically, the center of the field of view is defined as the origin.</p>
<p>To obtain the positions in an interpretable coordinate system, please use the other method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_detector_element_positions_accounting_for_device_position_mm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A numpy array containing the position vestors of the detection elements.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.detection_geometries.planar_array.PlanarArrayDetectionGeometry.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base">
<span id="illumination-geometries"></span><h4>Illumination Geometries<a class="headerlink" href="#module-simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.IlluminationGeometryBase">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.</code><code class="sig-name descname">IlluminationGeometryBase</code><a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.IlluminationGeometryBase" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents an illumination geometry.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.IlluminationGeometryBase.check_settings_prerequisites">
<code class="sig-name descname">check_settings_prerequisites</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.IlluminationGeometryBase.check_settings_prerequisites" title="Permalink to this definition">¶</a></dt>
<dd><p>It might be that certain device geometries need a certain dimensionality of the simulated PAI volume, or that
it required the existence of certain Tags in the global global_settings.
To this end, a  PAI device should use this method to inform the user about a mismatch of the desired device and
throw a ValueError if that is the case.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – raises a value error if the prerequisites are not matched.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the prerequisites are met, False if they are not met, but no exception has been raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.IlluminationGeometryBase.get_mcx_illuminator_definition">
<em class="property">abstract </em><code class="sig-name descname">get_mcx_illuminator_definition</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">probe_position_mm: numpy.ndarray</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.illumination_geometry_base.IlluminationGeometryBase.get_mcx_illuminator_definition" title="Permalink to this definition">¶</a></dt>
<dd><p>IMPORTANT: This method creates a dictionary that contains tags as they are expected for the
mcx simulation tool to represent the illumination geometry of this device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_settings</strong> – The global_settings instance containing the simulation instructions</p></li>
<li><p><strong>probe_position_mm</strong> – the position of the probe in the volume</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary that includes all parameters needed for mcx.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.PencilArrayIlluminationGeometry">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.</code><code class="sig-name descname">PencilArrayIlluminationGeometry</code><span class="sig-paren">(</span><em class="sig-param">pitch_mm=0.5</em>, <em class="sig-param">number_illuminators_x=100</em>, <em class="sig-param">number_illuminators_y=100</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.PencilArrayIlluminationGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a slit illumination geometry.
The device position is defined as the middle of the slit.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.PencilArrayIlluminationGeometry.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.PencilArrayIlluminationGeometry.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.PencilArrayIlluminationGeometry.get_mcx_illuminator_definition">
<code class="sig-name descname">get_mcx_illuminator_definition</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">probe_position_mm</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.pencil_array_illumination.PencilArrayIlluminationGeometry.get_mcx_illuminator_definition" title="Permalink to this definition">¶</a></dt>
<dd><p>IMPORTANT: This method creates a dictionary that contains tags as they are expected for the
mcx simulation tool to represent the illumination geometry of this device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_settings</strong> – The global_settings instance containing the simulation instructions</p></li>
<li><p><strong>probe_position_mm</strong> – the position of the probe in the volume</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary that includes all parameters needed for mcx.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.PencilBeamIlluminationGeometry">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.</code><code class="sig-name descname">PencilBeamIlluminationGeometry</code><a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.PencilBeamIlluminationGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a pencil beam illumination geometry.
The device position is defined as the middle of the slit.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.PencilBeamIlluminationGeometry.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.PencilBeamIlluminationGeometry.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.PencilBeamIlluminationGeometry.get_mcx_illuminator_definition">
<code class="sig-name descname">get_mcx_illuminator_definition</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">probe_position_mm</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.pencil_beam_illumination.PencilBeamIlluminationGeometry.get_mcx_illuminator_definition" title="Permalink to this definition">¶</a></dt>
<dd><p>IMPORTANT: This method creates a dictionary that contains tags as they are expected for the
mcx simulation tool to represent the illumination geometry of this device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_settings</strong> – The global_settings instance containing the simulation instructions</p></li>
<li><p><strong>probe_position_mm</strong> – the position of the probe in the volume</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary that includes all parameters needed for mcx.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.SlitIlluminationGeometry">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.</code><code class="sig-name descname">SlitIlluminationGeometry</code><span class="sig-paren">(</span><em class="sig-param">slit_vector_mm: list = None</em>, <em class="sig-param">direction_vector_mm: list = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.SlitIlluminationGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a slit illumination geometry.
The device position is defined as the middle of the slit.</p>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.SlitIlluminationGeometry.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.SlitIlluminationGeometry.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.SlitIlluminationGeometry.get_mcx_illuminator_definition">
<code class="sig-name descname">get_mcx_illuminator_definition</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">probe_position_mm</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination.SlitIlluminationGeometry.get_mcx_illuminator_definition" title="Permalink to this definition">¶</a></dt>
<dd><p>IMPORTANT: This method creates a dictionary that contains tags as they are expected for the
mcx simulation tool to represent the illumination geometry of this device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_settings</strong> – The global_settings instance containing the simulation instructions</p></li>
<li><p><strong>probe_position_mm</strong> – the position of the probe in the volume</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary that includes all parameters needed for mcx.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity">
<span id="models-of-real-world-devices"></span><h4>Models of real world devices<a class="headerlink" href="#module-simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity" title="Permalink to this headline">¶</a></h4>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity.MSOTAcuityEcho">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity.</code><code class="sig-name descname">MSOTAcuityEcho</code><span class="sig-paren">(</span><em class="sig-param">device_position_mm: numpy.ndarray = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity.MSOTAcuityEcho" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a digital twin of the MSOT Acuity Echo, manufactured by iThera Medical, Munich, Germany
(<a class="reference external" href="https://www.ithera-medical.com/products/msot-acuity/">https://www.ithera-medical.com/products/msot-acuity/</a>). It is based on the real specifications of the device, but
due to the limitations of the possibilities how to represent a device in the software frameworks,
constitutes only an approximation.</p>
<p>The origin for this device is the center of the membrane at the point of contact between the membrane and the
tissue, i.e. the outer center of the membrane.</p>
<p>Some important publications that showcase the use cases of the MSOT Acuity and Acuity Echo device are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Regensburger</span><span class="p">,</span> <span class="n">Adrian</span> <span class="n">P</span><span class="o">.</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="s2">&quot;Detection of collagens by multispectral optoacoustic</span>
<span class="n">tomography</span> <span class="k">as</span> <span class="n">an</span> <span class="n">imaging</span> <span class="n">biomarker</span> <span class="k">for</span> <span class="n">Duchenne</span> <span class="n">muscular</span> <span class="n">dystrophy</span><span class="o">.</span><span class="s2">&quot;</span>
<span class="n">Nature</span> <span class="n">Medicine</span> <span class="mf">25.12</span> <span class="p">(</span><span class="mi">2019</span><span class="p">):</span> <span class="mi">1905</span><span class="o">-</span><span class="mf">1915.</span>

<span class="n">Knieling</span><span class="p">,</span> <span class="n">Ferdinand</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="s2">&quot;Multispectral Optoacoustic Tomography for Assessment of</span>
<span class="n">Crohn</span><span class="s1">&#39;s Disease Activity.&quot;</span>
<span class="n">The</span> <span class="n">New</span> <span class="n">England</span> <span class="n">journal</span> <span class="n">of</span> <span class="n">medicine</span> <span class="mf">376.13</span> <span class="p">(</span><span class="mi">2017</span><span class="p">):</span> <span class="mf">1292.</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity.MSOTAcuityEcho.update_settings_for_use_of_model_based_volume_creator">
<code class="sig-name descname">update_settings_for_use_of_model_based_volume_creator</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_acuity.MSOTAcuityEcho.update_settings_for_use_of_model_based_volume_creator" title="Permalink to this definition">¶</a></dt>
<dd><p>This method can be overwritten by a photoacoustic device if the device poses special constraints to the
volume that should be considered by the model-based volume creator.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_invision"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_invision.InVision256TF">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_invision.</code><code class="sig-name descname">InVision256TF</code><span class="sig-paren">(</span><em class="sig-param">device_position_mm: numpy.ndarray = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_invision.InVision256TF" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a digital twin of the InVision 256-TF, manufactured by iThera Medical, Munich, Germany
(<a class="reference external" href="https://www.ithera-medical.com/products/msot-invision/">https://www.ithera-medical.com/products/msot-invision/</a>). It is based on the real specifications of the device, but
due to the limitations of the possibilities how to represent a device in the software frameworks,
constitutes only an approximation.</p>
<p>Some important publications that showcase the use cases of the InVision series devices are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Joseph</span><span class="p">,</span> <span class="n">James</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="s2">&quot;Evaluation of precision in optoacoustic tomography</span>
<span class="k">for</span> <span class="n">preclinical</span> <span class="n">imaging</span> <span class="ow">in</span> <span class="n">living</span> <span class="n">subjects</span><span class="o">.</span><span class="s2">&quot;</span>
<span class="n">Journal</span> <span class="n">of</span> <span class="n">Nuclear</span> <span class="n">Medicine</span> <span class="mf">58.5</span> <span class="p">(</span><span class="mi">2017</span><span class="p">):</span> <span class="mi">807</span><span class="o">-</span><span class="mf">814.</span>

<span class="n">Merčep</span><span class="p">,</span> <span class="n">Elena</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="s2">&quot;Whole-body live mouse imaging by hybrid</span>
<span class="n">reflection</span><span class="o">-</span><span class="n">mode</span> <span class="n">ultrasound</span> <span class="ow">and</span> <span class="n">optoacoustic</span> <span class="n">tomography</span><span class="o">.</span><span class="s2">&quot;</span>
<span class="n">Optics</span> <span class="n">letters</span> <span class="mf">40.20</span> <span class="p">(</span><span class="mi">2015</span><span class="p">):</span> <span class="mi">4643</span><span class="o">-</span><span class="mf">4646.</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_invision.InVision256TF.get_field_of_view_extent_mm">
<code class="sig-name descname">get_field_of_view_extent_mm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.core.device_digital_twins.devices.pa_devices.ithera_msot_invision.InVision256TF.get_field_of_view_extent_mm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the field of view extent of this imaging device.
It is defined as a numpy array of the shape [xs, xe, ys, ye, zs, ze],
where x, y, and z denote the coordinate axes and s and e denote the start and end
positions. These coordinates are defined relatively to the probe position.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.core.device_digital_twins.devices.pa_devices.ithera_rsom"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.core.device_digital_twins.devices.pa_devices.ithera_rsom.RSOMExplorerP50">
<em class="property">class </em><code class="sig-prename descclassname">simpa.core.device_digital_twins.devices.pa_devices.ithera_rsom.</code><code class="sig-name descname">RSOMExplorerP50</code><span class="sig-paren">(</span><em class="sig-param">element_spacing_mm=0.02</em>, <em class="sig-param">number_elements_x=10</em>, <em class="sig-param">number_elements_y=10</em>, <em class="sig-param">device_position_mm: numpy.ndarray = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.core.device_digital_twins.devices.pa_devices.ithera_rsom.RSOMExplorerP50" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents an approximation of the Raster-scanning Optoacoustic Mesoscopy (RSOM) device
built by iThera Medical (Munich, Germany). Please refer to the companie’s website for more information
(<a class="reference external" href="https://www.ithera-medical.com/products/rsom-explorer-p50/">https://www.ithera-medical.com/products/rsom-explorer-p50/</a>).</p>
<p>Since simulating thousands of individual forward modeling steps to obtain a single raster-scanned image
is computationally not feasible, we approximate the process with a device design that has detection elements
across the entire field of view. Because of this limitation we also need to approximate the light source
with a homogeneous illumination across the field of view.</p>
<p>The digital device is modeled based on the reported specifications of the RSOM Explorer P50 system.
Technical details of the system can be found in the dissertation of Mathias Schwarz
(<a class="reference external" href="https://mediatum.ub.tum.de/doc/1324031/1324031.pdf">https://mediatum.ub.tum.de/doc/1324031/1324031.pdf</a>) and you can find more details on
use cases of the device in the following literature sources:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Yew</span><span class="p">,</span> <span class="n">Yik</span> <span class="n">Weng</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="s2">&quot;Raster-scanning optoacoustic mesoscopy (RSOM) imaging</span>
<span class="k">as</span> <span class="n">an</span> <span class="n">objective</span> <span class="n">disease</span> <span class="n">severity</span> <span class="n">tool</span> <span class="ow">in</span> <span class="n">atopic</span> <span class="n">dermatitis</span> <span class="n">patients</span><span class="o">.</span><span class="s2">&quot;</span>
<span class="n">Journal</span> <span class="n">of</span> <span class="n">the</span> <span class="n">American</span> <span class="n">Academy</span> <span class="n">of</span> <span class="n">Dermatology</span> <span class="p">(</span><span class="mi">2020</span><span class="p">)</span><span class="o">.</span>

<span class="n">Hindelang</span><span class="p">,</span> <span class="n">B</span><span class="o">.</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="s2">&quot;Non-invasive imaging in dermatology and the unique</span>
<span class="n">potential</span> <span class="n">of</span> <span class="n">raster</span><span class="o">-</span><span class="n">scan</span> <span class="n">optoacoustic</span> <span class="n">mesoscopy</span><span class="o">.</span><span class="s2">&quot;</span>
<span class="n">Journal</span> <span class="n">of</span> <span class="n">the</span> <span class="n">European</span> <span class="n">Academy</span> <span class="n">of</span> <span class="n">Dermatology</span> <span class="ow">and</span> <span class="n">Venereology</span>
<span class="mf">33.6</span> <span class="p">(</span><span class="mi">2019</span><span class="p">):</span> <span class="mi">1051</span><span class="o">-</span><span class="mf">1061.</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-utils">
<h2>Module: utils<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h2>
<p>The utils module contains several general-purpose utility functions whose purpose it is to facilitate
the use of SIMPA. The most important of these is the Tags class, which defines the strings and data types
that have to be used for the keys and values of the settings dictionary.</p>
<span class="target" id="module-simpa.utils.calculate"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="function">
<dt id="simpa.utils.calculate.calculate_gruneisen_parameter_from_temperature">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">calculate_gruneisen_parameter_from_temperature</code><span class="sig-paren">(</span><em class="sig-param">temperature_in_celcius</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.calculate_gruneisen_parameter_from_temperature" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the dimensionless gruneisen parameter based on a heuristic formula that
was determined experimentally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@book</span><span class="p">{</span><span class="n">wang2012biomedical</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">Biomedical</span> <span class="n">optics</span><span class="p">:</span> <span class="n">principles</span> <span class="ow">and</span> <span class="n">imaging</span><span class="p">},</span>
    <span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">Wang</span><span class="p">,</span> <span class="n">Lihong</span> <span class="n">V</span> <span class="ow">and</span> <span class="n">Wu</span><span class="p">,</span> <span class="n">Hsin</span><span class="o">-</span><span class="n">i</span><span class="p">},</span>
    <span class="n">year</span><span class="o">=</span><span class="p">{</span><span class="mi">2012</span><span class="p">},</span>
    <span class="n">publisher</span><span class="o">=</span><span class="p">{</span><span class="n">John</span> <span class="n">Wiley</span> \<span class="o">&amp;</span> <span class="n">Sons</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>temperature_in_celcius</strong> – the temperature in degrees celcius</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a floating point number, if temperature_in_celcius is a number or a float array, if temperature_in_celcius is an array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.calculate_oxygenation">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">calculate_oxygenation</code><span class="sig-paren">(</span><em class="sig-param">molecule_list</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.calculate_oxygenation" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>an oxygenation value between 0 and 1 if possible, or None, if not computable.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.create_spline_for_range">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">create_spline_for_range</code><span class="sig-paren">(</span><em class="sig-param">xmin_mm=0</em>, <em class="sig-param">xmax_mm=10</em>, <em class="sig-param">maximum_y_elevation_mm=1</em>, <em class="sig-param">spacing=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.create_spline_for_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a functional that simulates distortion along the y position
between the minimum and maximum x positions. The elevation can never be
smaller than 0 or bigger than maximum_y_elevation_mm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xmin_mm</strong> – the minimum x axis value the return functional is defined in</p></li>
<li><p><strong>xmax_mm</strong> – the maximum x axis value the return functional is defined in</p></li>
<li><p><strong>maximum_y_elevation_mm</strong> – the maximum y axis value the return functional will yield</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a functional that describes a distortion field along the y axis</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.min_max_normalization">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">min_max_normalization</code><span class="sig-paren">(</span><em class="sig-param">data: numpy.ndarray = None</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#simpa.utils.calculate.min_max_normalization" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes the given data by applying min max normalization.
The resulting array has values between 0 and 1 inclusive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (numpy array) data to be normalized</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(numpy array) normalized array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.randomize_uniform">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">randomize_uniform</code><span class="sig-paren">(</span><em class="sig-param">min_value: float</em>, <em class="sig-param">max_value: float</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.randomize_uniform" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a uniformly drawn random number in [min_value, max_value[</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_value</strong> – minimum value</p></li>
<li><p><strong>max_value</strong> – maximum value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>random number in [min_value, max_value[</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.rotation">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">rotation</code><span class="sig-paren">(</span><em class="sig-param">angles</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation matrix around the x-, y-, and z-axis with angles [theta_x, theta_y, theta_z].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>angles</strong> – Angles through which the matrix is supposed to rotate in the form of [theta_x, theta_y, theta_z].</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotation matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.rotation_matrix_between_vectors">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">rotation_matrix_between_vectors</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.rotation_matrix_between_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the rotation matrix from a to b</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> – 3D vector to rotate</p></li>
<li><p><strong>b</strong> – 3D target vector</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotation matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.rotation_x">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">rotation_x</code><span class="sig-paren">(</span><em class="sig-param">theta</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.rotation_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation matrix around the x-axis with angle theta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>theta</strong> – Angle through which the matrix is supposed to rotate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotation matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.rotation_y">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">rotation_y</code><span class="sig-paren">(</span><em class="sig-param">theta</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.rotation_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation matrix around the y-axis with angle theta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>theta</strong> – Angle through which the matrix is supposed to rotate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotation matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.calculate.rotation_z">
<code class="sig-prename descclassname">simpa.utils.calculate.</code><code class="sig-name descname">rotation_z</code><span class="sig-paren">(</span><em class="sig-param">theta</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.calculate.rotation_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation matrix around the z-axis with angle theta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>theta</strong> – Angle through which the matrix is supposed to rotate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rotation matrix</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-simpa.utils.constants"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="data">
<dt id="simpa.utils.constants.EPS">
<code class="sig-prename descclassname">simpa.utils.constants.</code><code class="sig-name descname">EPS</code><em class="property"> = 1e-20</em><a class="headerlink" href="#simpa.utils.constants.EPS" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the smallest increment that should be considered by SIMPA.</p>
</dd></dl>

<dl class="class">
<dt id="simpa.utils.constants.SaveFilePaths">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.constants.</code><code class="sig-name descname">SaveFilePaths</code><a class="headerlink" href="#simpa.utils.constants.SaveFilePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>The save file paths specify the path of a specific data structure in the dictionary of the simpa output hdf5.
All of these paths have to be used like:
SaveFilePaths.PATH + “data_structure”</p>
</dd></dl>

<dl class="class">
<dt id="simpa.utils.constants.SegmentationClasses">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.constants.</code><code class="sig-name descname">SegmentationClasses</code><a class="headerlink" href="#simpa.utils.constants.SegmentationClasses" title="Permalink to this definition">¶</a></dt>
<dd><p>The segmentation classes define which “tissue types” are modelled in the simulation volumes.</p>
</dd></dl>

<span class="target" id="module-simpa.utils.deformation_manager"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="function">
<dt id="simpa.utils.deformation_manager.create_deformation_settings">
<code class="sig-prename descclassname">simpa.utils.deformation_manager.</code><code class="sig-name descname">create_deformation_settings</code><span class="sig-paren">(</span><em class="sig-param">bounds_mm</em>, <em class="sig-param">maximum_z_elevation_mm=1</em>, <em class="sig-param">filter_sigma=1</em>, <em class="sig-param">cosine_scaling_factor=4</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.deformation_manager.create_deformation_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>FIXME</p>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.deformation_manager.get_functional_from_deformation_settings">
<code class="sig-prename descclassname">simpa.utils.deformation_manager.</code><code class="sig-name descname">get_functional_from_deformation_settings</code><span class="sig-paren">(</span><em class="sig-param">deformation_settings: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.deformation_manager.get_functional_from_deformation_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>FIXME</p>
</dd></dl>

<span class="target" id="module-simpa.utils.dict_path_manager"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="function">
<dt id="simpa.utils.dict_path_manager.generate_dict_path">
<code class="sig-prename descclassname">simpa.utils.dict_path_manager.</code><code class="sig-name descname">generate_dict_path</code><span class="sig-paren">(</span><em class="sig-param">data_field</em>, <em class="sig-param">wavelength: (&lt;class 'int'&gt;</em>, <em class="sig-param">&lt;class 'float'&gt;) = None</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#simpa.utils.dict_path_manager.generate_dict_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a path within an hdf5 file in the SIMPA convention</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_field</strong> – Data field that is supposed to be stored in an hdf5 file.</p></li>
<li><p><strong>wavelength</strong> – Wavelength of the current simulation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String which defines the path to the data_field.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.utils.dict_path_manager.get_data_field_from_simpa_output">
<code class="sig-prename descclassname">simpa.utils.dict_path_manager.</code><code class="sig-name descname">get_data_field_from_simpa_output</code><span class="sig-paren">(</span><em class="sig-param">simpa_output: dict</em>, <em class="sig-param">data_field: (&lt;class 'tuple'&gt;</em>, <em class="sig-param">&lt;class 'str'&gt;)</em>, <em class="sig-param">wavelength: (&lt;class 'int'&gt;</em>, <em class="sig-param">&lt;class 'float'&gt;) = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.dict_path_manager.get_data_field_from_simpa_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates through a dictionary in the standard simpa output format to a specific data field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>simpa_output</strong> – Dictionary that is in the standard simpa output format.</p></li>
<li><p><strong>data_field</strong> – Data field that is contained in simpa_output.</p></li>
<li><p><strong>wavelength</strong> – Wavelength of the current simulation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Queried data_field.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-simpa.utils.path_manager"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.path_manager.PathManager">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.path_manager.</code><code class="sig-name descname">PathManager</code><span class="sig-paren">(</span><em class="sig-param">environment_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.path_manager.PathManager" title="Permalink to this definition">¶</a></dt>
<dd><p>As a pipelining tool that serves as a communication layer between different numerical forward models and
processing tools, SIMPA needs to be configured with the paths to these tools on your local hard drive.
To this end, we have implemented the <cite>PathManager</cite> class that you can import to your project using
<cite>from simpa.utils import PathManager</cite>. The PathManager looks for a <cite>path_config.env</cite> file (just like the
one we provided in the <cite>simpa_examples</cite>) in the following places in this order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The optional path you give the PathManager</p></li>
<li><p>Your $HOME$ directory</p></li>
<li><p>The current working directory</p></li>
<li><p>The SIMPA home directory path</p></li>
</ol>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.path_manager.PathManager.detect_local_path_config">
<code class="sig-name descname">detect_local_path_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.path_manager.PathManager.detect_local_path_config" title="Permalink to this definition">¶</a></dt>
<dd><p>This methods looks in the default local paths for a path_config.env file.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.utils.settings"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.settings.Settings">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.settings.</code><code class="sig-name descname">Settings</code><span class="sig-paren">(</span><em class="sig-param">dictionary: dict = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings" title="Permalink to this definition">¶</a></dt>
<dd><p>The Settings class is a dictionary that contains all relevant settings for running a simulation in the SIMPA
toolkit. It includes an automatic sanity check for input parameters using the simpa.utils.Tags class.</p>
<p>Usage: Seetings({Tags.KEY1: value1, Tags.KEY2: value2, …})</p>
<dl class="method">
<dt id="simpa.utils.settings.Settings.get_acoustic_settings">
<code class="sig-name descname">get_acoustic_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.get_acoustic_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Returns the settings for the acoustic forward model that are saved in this settings dictionary</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.get_optical_settings">
<code class="sig-name descname">get_optical_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.get_optical_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Returns the settings for the optical forward model that are saved in this settings dictionary</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.get_reconstruction_settings">
<code class="sig-name descname">get_reconstruction_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.get_reconstruction_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Returns the settings for the reconstruction model that are saved in this settings dictionary</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.get_volume_creation_settings">
<code class="sig-name descname">get_volume_creation_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.get_volume_creation_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Returns the settings for the optical forward model that are saved in this settings dictionary</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.set_acoustic_settings">
<code class="sig-name descname">set_acoustic_settings</code><span class="sig-paren">(</span><em class="sig-param">acoustic_settings: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.set_acoustic_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces the currently stored acoustic forward model settings with the given dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>acoustic_settings</strong> – a dictionary containing the acoustic model settings</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.set_optical_settings">
<code class="sig-name descname">set_optical_settings</code><span class="sig-paren">(</span><em class="sig-param">optical_settings: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.set_optical_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces the currently stored optical settings with the given dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>optical_settings</strong> – a dictionary containing the optical settings</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.set_reconstruction_settings">
<code class="sig-name descname">set_reconstruction_settings</code><span class="sig-paren">(</span><em class="sig-param">reconstruction_settings: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.set_reconstruction_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces the currently stored reconstruction model settings with the given dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reconstruction_settings</strong> – a dictionary containing the reconstruction model settings</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.settings.Settings.set_volume_creation_settings">
<code class="sig-name descname">set_volume_creation_settings</code><span class="sig-paren">(</span><em class="sig-param">volume_settings: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.settings.Settings.set_volume_creation_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces the currently stored volume creation settings with the given dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume_settings</strong> – a dictionary containing the volume creator settings</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.utils.tags"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.tags.Tags">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.tags.</code><code class="sig-name descname">Tags</code><a class="headerlink" href="#simpa.utils.tags.Tags" title="Permalink to this definition">¶</a></dt>
<dd><p>This class contains all ‘Tags’ for the use in the settings dictionary as well as strings that are used in SIMPA
as naming conventions.
Every Tag that is intended to be used as a key in the settings dictionary is represented by a tuple.
The first element of the tuple is a string that corresponds to the name of the Tag.
The second element of the tuple is a data type or a tuple of data types.
The values that are assigned to the keys in the settings should match these data types.
Their usage within the SIMPA package is divided in “SIMPA package”, “module X”, “adapter Y”, “class Z” and
“naming convention”.</p>
<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_LOG_SCALE">
<code class="sig-name descname">ACOUSTIC_LOG_SCALE</code><em class="property"> = ('acoustic_log_scale', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_LOG_SCALE" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the movie of the kwave simulation will be recorded in a log scale.</p>
<p>Usage: adapter KwaveAcousticForwardModel</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_MODEL">
<code class="sig-name descname">ACOUSTIC_MODEL</code><em class="property"> = ('acoustic_model', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_MODEL" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the used acoustic model.</p>
<p>Usage: module acoustic_forward_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_MODEL_BINARY_PATH">
<code class="sig-name descname">ACOUSTIC_MODEL_BINARY_PATH</code><em class="property"> = ('acoustic_model_binary_path', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_MODEL_BINARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the location of the acoustic forward model binary.</p>
<p>Usage: module optical_simulation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_MODEL_K_WAVE">
<code class="sig-name descname">ACOUSTIC_MODEL_K_WAVE</code><em class="property"> = 'kwave'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_MODEL_K_WAVE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the kwave simulaiton.</p>
<p>Usage: module acoustic_forward_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_MODEL_OUTPUT_NAME">
<code class="sig-name descname">ACOUSTIC_MODEL_OUTPUT_NAME</code><em class="property"> = 'acoustic_forward_model_output'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_MODEL_OUTPUT_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the acoustic forward model output field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_MODEL_SETTINGS">
<code class="sig-name descname">ACOUSTIC_MODEL_SETTINGS</code><em class="property"> = ('acoustic_model_settings', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_MODEL_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd><p>Acoustic model settings.</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_MODEL_TEST">
<code class="sig-name descname">ACOUSTIC_MODEL_TEST</code><em class="property"> = 'simpa_tests'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_MODEL_TEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to an adapter for testing purposes only.</p>
<p>Usage: module acoustic_forward_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ACOUSTIC_SIMULATION_3D">
<code class="sig-name descname">ACOUSTIC_SIMULATION_3D</code><em class="property"> = ('acoustic_simulation_3d', &lt;class 'bool'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.ACOUSTIC_SIMULATION_3D" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, simulates the acoustic forward model in 3D.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ADHERE_TO_DEFORMATION">
<code class="sig-name descname">ADHERE_TO_DEFORMATION</code><em class="property"> = ('adhere_to_deformation', &lt;class 'bool'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.ADHERE_TO_DEFORMATION" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, a structure will be shifted according to the deformation.</p>
<p>Usage: adapter versatile_volume_creation</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.BACKGROUND">
<code class="sig-name descname">BACKGROUND</code><em class="property"> = 'Background'</em><a class="headerlink" href="#simpa.utils.tags.Tags.BACKGROUND" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the name of a structure.</p>
<p>Usage: adapter versatile_volume_creation, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.BANDPASS_CUTOFF_HIGHPASS">
<code class="sig-name descname">BANDPASS_CUTOFF_HIGHPASS</code><em class="property"> = ('bandpass_cuttoff_highpass', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.BANDPASS_CUTOFF_HIGHPASS" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the cutoff threshold in MHz for highpass filtering, i.e. lower limit of the tukey filter. Default is 0.1 MHz</p>
<p>Usage: adapter PyTorchDASAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.BANDPASS_CUTOFF_LOWPASS">
<code class="sig-name descname">BANDPASS_CUTOFF_LOWPASS</code><em class="property"> = ('bandpass_cuttoff_lowpass', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.BANDPASS_CUTOFF_LOWPASS" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the cutoff threshold in MHz for lowpass filtering, i.e. upper limit of the tukey filter. Default is 8 MHz</p>
<p>Usage: adapter PyTorchDASAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.CHILD_STRUCTURES">
<code class="sig-name descname">CHILD_STRUCTURES</code><em class="property"> = ('child_structures', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.CHILD_STRUCTURES" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings dictionary which contains all the child structures of a parent structure.</p>
<p>Usage: module volume_creation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.CIRCULAR_TUBULAR_STRUCTURE">
<code class="sig-name descname">CIRCULAR_TUBULAR_STRUCTURE</code><em class="property"> = 'CircularTubularStructure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.CIRCULAR_TUBULAR_STRUCTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the CircularTubularStructure in the structure_library.</p>
<p>Usage: module volume_creation_module, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.CONSIDER_PARTIAL_VOLUME">
<code class="sig-name descname">CONSIDER_PARTIAL_VOLUME</code><em class="property"> = ('consider_partial_volume', &lt;class 'bool'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.CONSIDER_PARTIAL_VOLUME" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the structure will be generated with its edges only occupying a partial volume of the voxel.</p>
<p>Usage: adapter versatile_volume_creation</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DATA_FIELD">
<code class="sig-name descname">DATA_FIELD</code><em class="property"> = 'data_field'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DATA_FIELD" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines which data field a certain function shall be applied to.</p>
<p>Usage: module core.processing_components</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DEFORMATION_X_COORDINATES_MM">
<code class="sig-name descname">DEFORMATION_X_COORDINATES_MM</code><em class="property"> = 'deformation_x_coordinates'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DEFORMATION_X_COORDINATES_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Mesh that defines the x coordinates of the deformation.</p>
<p>Usage: adapter versatile_volume_creation, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DEFORMATION_Y_COORDINATES_MM">
<code class="sig-name descname">DEFORMATION_Y_COORDINATES_MM</code><em class="property"> = 'deformation_y_coordinates'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DEFORMATION_Y_COORDINATES_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Mesh that defines the y coordinates of the deformation.</p>
<p>Usage: adapter versatile_volume_creation, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DEFORMATION_Z_ELEVATIONS_MM">
<code class="sig-name descname">DEFORMATION_Z_ELEVATIONS_MM</code><em class="property"> = 'deformation_z_elevation'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DEFORMATION_Z_ELEVATIONS_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Mesh that defines the z coordinates of the deformation.</p>
<p>Usage: adapter versatile_volume_creation, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DEFORMED_LAYERS_SETTINGS">
<code class="sig-name descname">DEFORMED_LAYERS_SETTINGS</code><em class="property"> = ('deformed_layers_settings', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.DEFORMED_LAYERS_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings that contain the functional which defines the deformation of the layers.</p>
<p>Usage: adapter versatile_volume_creation</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DETECTOR_ELEMENT_WIDTH_MM">
<code class="sig-name descname">DETECTOR_ELEMENT_WIDTH_MM</code><em class="property"> = 'detector_element_width_mm'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DETECTOR_ELEMENT_WIDTH_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Width of a detector element. Corresponds to the pitch - the distance between two detector element borders.</p>
<p>Usage: module acoustic_forward_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIGITAL_DEVICE">
<code class="sig-name descname">DIGITAL_DEVICE</code><em class="property"> = ('digital_device', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIGITAL_DEVICE" title="Permalink to this definition">¶</a></dt>
<dd><p>Digital device that is chosen as illumination source and detector for the simulation.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIGITAL_DEVICE_MSOT_ACUITY">
<code class="sig-name descname">DIGITAL_DEVICE_MSOT_ACUITY</code><em class="property"> = 'digital_device_msot'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIGITAL_DEVICE_MSOT_ACUITY" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the MSOTAcuityEcho device.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIGITAL_DEVICE_MSOT_INVISION">
<code class="sig-name descname">DIGITAL_DEVICE_MSOT_INVISION</code><em class="property"> = 'digital_device_invision'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIGITAL_DEVICE_MSOT_INVISION" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the InVision 256-TF device.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIGITAL_DEVICE_POSITION">
<code class="sig-name descname">DIGITAL_DEVICE_POSITION</code><em class="property"> = ('digital_device_position', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIGITAL_DEVICE_POSITION" title="Permalink to this definition">¶</a></dt>
<dd><p>Position in [x, y, z] coordinates of the device in the generated volume.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIGITAL_DEVICE_RSOM">
<code class="sig-name descname">DIGITAL_DEVICE_RSOM</code><em class="property"> = 'digital_device_rsom'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIGITAL_DEVICE_RSOM" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the RSOMExplorerP50 device.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIGITAL_DEVICE_SLIT_ILLUMINATION_LINEAR_DETECTOR">
<code class="sig-name descname">DIGITAL_DEVICE_SLIT_ILLUMINATION_LINEAR_DETECTOR</code><em class="property"> = 'digital_device_slit_illumination_linear_detector'</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIGITAL_DEVICE_SLIT_ILLUMINATION_LINEAR_DETECTOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to a PA device with a slit as illumination and a linear array as detection geometry.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIM_VOLUME_X_MM">
<code class="sig-name descname">DIM_VOLUME_X_MM</code><em class="property"> = ('volume_x_dim_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIM_VOLUME_X_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Extent of the x-axis of the generated volume.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIM_VOLUME_Y_MM">
<code class="sig-name descname">DIM_VOLUME_Y_MM</code><em class="property"> = ('volume_y_dim_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIM_VOLUME_Y_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Extent of the y-axis of the generated volume.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DIM_VOLUME_Z_MM">
<code class="sig-name descname">DIM_VOLUME_Z_MM</code><em class="property"> = ('volume_z_dim_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.DIM_VOLUME_Z_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Extent of the z-axis of the generated volume.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.DOWNSCALE_FACTOR">
<code class="sig-name descname">DOWNSCALE_FACTOR</code><em class="property"> = ('downscale_factor', (&lt;class 'int'&gt;, &lt;class 'float'&gt;, &lt;class 'numpy.int64'&gt;, &lt;class 'numpy.float64'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.DOWNSCALE_FACTOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Downscale factor of the resampling in the qPAI reconstruction</p>
<p>Usage: module algorithms (iterative_qPAI_algorithm.py)</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ELLIPTICAL_TUBULAR_STRUCTURE">
<code class="sig-name descname">ELLIPTICAL_TUBULAR_STRUCTURE</code><em class="property"> = 'EllipticalTubularStructure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ELLIPTICAL_TUBULAR_STRUCTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the EllipticalTubularStructure in the structure_library.</p>
<p>Usage: module volume_creation_module, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.GPU">
<code class="sig-name descname">GPU</code><em class="property"> = ('gpu', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.GPU" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, uses all available gpu options of the used modules.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.HORIZONTAL_LAYER_STRUCTURE">
<code class="sig-name descname">HORIZONTAL_LAYER_STRUCTURE</code><em class="property"> = 'HorizontalLayerStructure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.HORIZONTAL_LAYER_STRUCTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the HorizontalLayerStructure in the structure_library.</p>
<p>Usage: module volume_creation_module, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_DIRECTION">
<code class="sig-name descname">ILLUMINATION_DIRECTION</code><em class="property"> = ('illumination_direction', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_DIRECTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Direction of the photon source as [x, y, z] vector used in mcx.</p>
<p>Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_PARAM1">
<code class="sig-name descname">ILLUMINATION_PARAM1</code><em class="property"> = ('illumination_param1', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_PARAM1" title="Permalink to this definition">¶</a></dt>
<dd><p>First parameter group of the specified illumination type as [x, y, z, w] vector used in mcx.</p>
<p>Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_PARAM2">
<code class="sig-name descname">ILLUMINATION_PARAM2</code><em class="property"> = ('illumination_param2', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_PARAM2" title="Permalink to this definition">¶</a></dt>
<dd><p>Second parameter group of the specified illumination type as [x, y, z, w] vector used in mcx.</p>
<p>Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_POSITION">
<code class="sig-name descname">ILLUMINATION_POSITION</code><em class="property"> = ('illumination_position', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_POSITION" title="Permalink to this definition">¶</a></dt>
<dd><p>Position of the photon source in [x, y, z] coordinates used in mcx.</p>
<p>Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE">
<code class="sig-name descname">ILLUMINATION_TYPE</code><em class="property"> = ('optical_model_illumination_type', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of the illumination geometry used in mcx.</p>
<p>Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_DISK">
<code class="sig-name descname">ILLUMINATION_TYPE_DISK</code><em class="property"> = 'disk'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_DISK" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to disk source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_DKFZ_PAUS">
<code class="sig-name descname">ILLUMINATION_TYPE_DKFZ_PAUS</code><em class="property"> = 'pasetup'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_DKFZ_PAUS" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to pasetup source in mcx. The geometrical definition is described in:</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_FOURIER">
<code class="sig-name descname">ILLUMINATION_TYPE_FOURIER</code><em class="property"> = 'fourier'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_FOURIER" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to fourier source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_FOURIER_X">
<code class="sig-name descname">ILLUMINATION_TYPE_FOURIER_X</code><em class="property"> = 'fourierx'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_FOURIER_X" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to fourierx source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_FOURIER_X_2D">
<code class="sig-name descname">ILLUMINATION_TYPE_FOURIER_X_2D</code><em class="property"> = 'fourierx2d'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_FOURIER_X_2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to fourierx2d source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_GAUSSIAN">
<code class="sig-name descname">ILLUMINATION_TYPE_GAUSSIAN</code><em class="property"> = 'gaussian'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_GAUSSIAN" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to gaussian source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_IPASC_DEFINITION">
<code class="sig-name descname">ILLUMINATION_TYPE_IPASC_DEFINITION</code><em class="property"> = 'ipasc'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_IPASC_DEFINITION" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to a source definition in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_MSOT_ACUITY_ECHO">
<code class="sig-name descname">ILLUMINATION_TYPE_MSOT_ACUITY_ECHO</code><em class="property"> = 'msot_acuity_echo'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_MSOT_ACUITY_ECHO" title="Permalink to this definition">¶</a></dt>
<dd><p>s
Corresponds to msot_acuity_echo source in mcx. The device is manufactured by iThera Medical, Munich, Germany
(https: // www.ithera-medical.com / products / msot-acuity /).</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_MSOT_INVISION">
<code class="sig-name descname">ILLUMINATION_TYPE_MSOT_INVISION</code><em class="property"> = 'invision'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_MSOT_INVISION" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to a source definition in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_PATTERN">
<code class="sig-name descname">ILLUMINATION_TYPE_PATTERN</code><em class="property"> = 'pattern'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to pattern source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_PATTERN_3D">
<code class="sig-name descname">ILLUMINATION_TYPE_PATTERN_3D</code><em class="property"> = 'pattern3d'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_PATTERN_3D" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to pattern3d source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_PENCIL">
<code class="sig-name descname">ILLUMINATION_TYPE_PENCIL</code><em class="property"> = 'pencil'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_PENCIL" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to pencil source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_PENCILARRAY">
<code class="sig-name descname">ILLUMINATION_TYPE_PENCILARRAY</code><em class="property"> = 'pencilarray'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_PENCILARRAY" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to pencilarray source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_PLANAR">
<code class="sig-name descname">ILLUMINATION_TYPE_PLANAR</code><em class="property"> = 'planar'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_PLANAR" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to planar source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_RING">
<code class="sig-name descname">ILLUMINATION_TYPE_RING</code><em class="property"> = 'ring'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_RING" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to ring source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ILLUMINATION_TYPE_SLIT">
<code class="sig-name descname">ILLUMINATION_TYPE_SLIT</code><em class="property"> = 'slit'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ILLUMINATION_TYPE_SLIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to slit source in mcx.</p>
<p>Usage: adapter mcx_adapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.IMAGE_PROCESSING">
<code class="sig-name descname">IMAGE_PROCESSING</code><em class="property"> = 'image_processing'</em><a class="headerlink" href="#simpa.utils.tags.Tags.IMAGE_PROCESSING" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of the image algorithms outputs in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.INITIAL_PRESSURE_SMOOTHING">
<code class="sig-name descname">INITIAL_PRESSURE_SMOOTHING</code><em class="property"> = ('initial_pressure_smoothing', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.INITIAL_PRESSURE_SMOOTHING" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the initial pressure is smoothed before simulated in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.INPUT_SEGMENTATION_VOLUME">
<code class="sig-name descname">INPUT_SEGMENTATION_VOLUME</code><em class="property"> = ('input_segmentation_volume', &lt;class 'numpy.ndarray'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.INPUT_SEGMENTATION_VOLUME" title="Permalink to this definition">¶</a></dt>
<dd><p>Array that defines a segmented volume.</p>
<p>Usage: adapter segmentation_based_volume_creator</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_CONSTANT_REGULARIZATION">
<code class="sig-name descname">ITERATIVE_RECONSTRUCTION_CONSTANT_REGULARIZATION</code><em class="property"> = ('constant_regularization', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_CONSTANT_REGULARIZATION" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the fluence regularization will be constant.</p>
<p>Usage: module algorithms (iterative_qPAI_algorithm.py)</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_MAX_ITERATION_NUMBER">
<code class="sig-name descname">ITERATIVE_RECONSTRUCTION_MAX_ITERATION_NUMBER</code><em class="property"> = ('maximum_iteration_number', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_MAX_ITERATION_NUMBER" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of iterations performed in iterative reconstruction if stopping criterion is not reached.</p>
<p>Usage: module algorithms (iterative_qPAI_algorithm.py)</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_REGULARIZATION_SIGMA">
<code class="sig-name descname">ITERATIVE_RECONSTRUCTION_REGULARIZATION_SIGMA</code><em class="property"> = ('regularization_sigma', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_REGULARIZATION_SIGMA" title="Permalink to this definition">¶</a></dt>
<dd><p>Sigma value used for constant regularization of fluence.</p>
<p>Usage: module algorithms (iterative_qPAI_algorithm.py)</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_SAVE_INTERMEDIATE_RESULTS">
<code class="sig-name descname">ITERATIVE_RECONSTRUCTION_SAVE_INTERMEDIATE_RESULTS</code><em class="property"> = ('save_intermediate_results', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_SAVE_INTERMEDIATE_RESULTS" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, a list of all intermediate absorption updates (middle slices only) will be saved in a numpy file.</p>
<p>Usage: module algorithms (iterative_qPAI_algorithm.py)</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_STOPPING_LEVEL">
<code class="sig-name descname">ITERATIVE_RECONSTRUCTION_STOPPING_LEVEL</code><em class="property"> = ('iteration_stopping_level', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.ITERATIVE_RECONSTRUCTION_STOPPING_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd><p>Ratio of improvement and preceding error at which iteration method stops. 
Usage: module algorithms (iterative_qPAI_algorithm.py)</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ITERATIVE_qPAI_RESULT">
<code class="sig-name descname">ITERATIVE_qPAI_RESULT</code><em class="property"> = 'iterative_qpai_result'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ITERATIVE_qPAI_RESULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the data field in which the iterative qPAI result will be stored.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.K_WAVE_SPECIFIC_DT">
<code class="sig-name descname">K_WAVE_SPECIFIC_DT</code><em class="property"> = ('dt_acoustic_sim', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.K_WAVE_SPECIFIC_DT" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporal resolution of kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.K_WAVE_SPECIFIC_NT">
<code class="sig-name descname">K_WAVE_SPECIFIC_NT</code><em class="property"> = ('Nt_acoustic_sim', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.K_WAVE_SPECIFIC_NT" title="Permalink to this definition">¶</a></dt>
<dd><p>Total time steps simulated by kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.LASER_PULSE_ENERGY_IN_MILLIJOULE">
<code class="sig-name descname">LASER_PULSE_ENERGY_IN_MILLIJOULE</code><em class="property"> = ('laser_pulse_energy_in_millijoule', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;, &lt;class 'list'&gt;, &lt;class 'range'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.LASER_PULSE_ENERGY_IN_MILLIJOULE" title="Permalink to this definition">¶</a></dt>
<dd><p>Laser pulse energy used in the optical simulation.</p>
<p>Usage: module optical_simulation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.LINEAR_UNMIXING_RESULT">
<code class="sig-name descname">LINEAR_UNMIXING_RESULT</code><em class="property"> = 'linear_unmixing_result'</em><a class="headerlink" href="#simpa.utils.tags.Tags.LINEAR_UNMIXING_RESULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the data field in which the linear unmixing result will be stored.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.LOAD_AND_SAVE_HDF5_FILE_AT_THE_END_OF_SIMULATION_TO_MINIMISE_FILESIZE">
<code class="sig-name descname">LOAD_AND_SAVE_HDF5_FILE_AT_THE_END_OF_SIMULATION_TO_MINIMISE_FILESIZE</code><em class="property"> = ('minimize_file_size', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.LOAD_AND_SAVE_HDF5_FILE_AT_THE_END_OF_SIMULATION_TO_MINIMISE_FILESIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>If not set to False, the HDF5 file will be optimised after the simulations are done.
Usage: simpa.core.simulation.simulate</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MAX_DEFORMATION_MM">
<code class="sig-name descname">MAX_DEFORMATION_MM</code><em class="property"> = 'max_deformation'</em><a class="headerlink" href="#simpa.utils.tags.Tags.MAX_DEFORMATION_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum deformation in z-direction.</p>
<p>Usage: adapter versatile_volume_creation, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MCX_ASSUMED_ANISOTROPY">
<code class="sig-name descname">MCX_ASSUMED_ANISOTROPY</code><em class="property"> = ('mcx_seed', (&lt;class 'int'&gt;, &lt;class 'int'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.MCX_ASSUMED_ANISOTROPY" title="Permalink to this definition">¶</a></dt>
<dd><p>The anisotropy that should be assumed for the mcx simulations.
If not set, a default value of 0.9 will be assumed.
Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MCX_SEED">
<code class="sig-name descname">MCX_SEED</code><em class="property"> = ('mcx_seed', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.MCX_SEED" title="Permalink to this definition">¶</a></dt>
<dd><p>Specific seed for random initialisation in mcx.</p>
<p>if not set, Tags.RANDOM_SEED will be used instead.
Usage: module optical_modelling, adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MEDIUM_TEMPERATURE_CELCIUS">
<code class="sig-name descname">MEDIUM_TEMPERATURE_CELCIUS</code><em class="property"> = ('medium_temperature', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.MEDIUM_TEMPERATURE_CELCIUS" title="Permalink to this definition">¶</a></dt>
<dd><p>Temperature of the simulated volume.</p>
<p>Usage: module noise_simulation</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MODEL_SENSOR_FREQUENCY_RESPONSE">
<code class="sig-name descname">MODEL_SENSOR_FREQUENCY_RESPONSE</code><em class="property"> = ('model_sensor_frequency_response', &lt;class 'bool'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.MODEL_SENSOR_FREQUENCY_RESPONSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean to decide whether to model the sensor frequency response in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MOLECULE_COMPOSITION">
<code class="sig-name descname">MOLECULE_COMPOSITION</code><em class="property"> = ('molecule_composition', &lt;class 'list'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.MOLECULE_COMPOSITION" title="Permalink to this definition">¶</a></dt>
<dd><p>List that contains all the molecules within a structure.</p>
<p>Usage: module volume_creation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.MOVIENAME">
<code class="sig-name descname">MOVIENAME</code><em class="property"> = ('movie_name', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.MOVIENAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the movie recorded by kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_FREQUENCY">
<code class="sig-name descname">NOISE_FREQUENCY</code><em class="property"> = 'noise_frequency'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_FREQUENCY" title="Permalink to this definition">¶</a></dt>
<dd><p>Frequency of the noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_MAX">
<code class="sig-name descname">NOISE_MAX</code><em class="property"> = 'noise_max'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_MAX" title="Permalink to this definition">¶</a></dt>
<dd><p>Max of a noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_MEAN">
<code class="sig-name descname">NOISE_MEAN</code><em class="property"> = 'noise_mean'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_MEAN" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean of a noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_MIN">
<code class="sig-name descname">NOISE_MIN</code><em class="property"> = 'noise_min'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_MIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Min of a noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_MODE">
<code class="sig-name descname">NOISE_MODE</code><em class="property"> = 'noise_mode'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_MODE" title="Permalink to this definition">¶</a></dt>
<dd><p>The mode tag of a noise model is used to differentiate between</p>
<p>Tags.NOISE_MODE_ADDITIVE and Tags.NOISE_MODE_MULTIPLICATIVE.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_MODE_ADDITIVE">
<code class="sig-name descname">NOISE_MODE_ADDITIVE</code><em class="property"> = 'noise_mode_additive'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_MODE_ADDITIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>A noise model shall be applied additively s_n = s + n.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_MODE_MULTIPLICATIVE">
<code class="sig-name descname">NOISE_MODE_MULTIPLICATIVE</code><em class="property"> = 'noise_mode_multiplicative'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_MODE_MULTIPLICATIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>A noise model shall be applied multiplicatively s_n = s * n.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_NON_NEGATIVITY_CONSTRAINT">
<code class="sig-name descname">NOISE_NON_NEGATIVITY_CONSTRAINT</code><em class="property"> = 'noise_non_negativity_constraint'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_NON_NEGATIVITY_CONSTRAINT" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines if after the noise model negative values shall be allowed.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_SCALE">
<code class="sig-name descname">NOISE_SCALE</code><em class="property"> = 'noise_scale'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_SCALE" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale of a noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_SHAPE">
<code class="sig-name descname">NOISE_SHAPE</code><em class="property"> = 'noise_shape'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_SHAPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Shape of a noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.NOISE_STD">
<code class="sig-name descname">NOISE_STD</code><em class="property"> = 'noise_std'</em><a class="headerlink" href="#simpa.utils.tags.Tags.NOISE_STD" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard deviation of a noise model.</p>
<p>Usage: module core.processing_components.noise</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL">
<code class="sig-name descname">OPTICAL_MODEL</code><em class="property"> = ('optical_model', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the used optical model.</p>
<p>Usage: module optical_simulation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_BINARY_PATH">
<code class="sig-name descname">OPTICAL_MODEL_BINARY_PATH</code><em class="property"> = ('optical_model_binary_path', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_BINARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the location of the optical forward model binary.</p>
<p>Usage: module optical_simulation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_FLUENCE">
<code class="sig-name descname">OPTICAL_MODEL_FLUENCE</code><em class="property"> = 'fluence'</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_FLUENCE" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the optical forward model output fluence field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_ILLUMINATION_GEOMETRY_JSON_FILE">
<code class="sig-name descname">OPTICAL_MODEL_ILLUMINATION_GEOMETRY_JSON_FILE</code><em class="property"> = ('optical_model_illumination_geometry_json_file', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_ILLUMINATION_GEOMETRY_JSON_FILE" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the location of the JSON file containing the IPASC-formatted optical forward 
model illumination geometry.</p>
<p>Usage: module optical_simulation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_INITIAL_PRESSURE">
<code class="sig-name descname">OPTICAL_MODEL_INITIAL_PRESSURE</code><em class="property"> = 'initial_pressure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_INITIAL_PRESSURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the optical forward model output initial pressure field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_MCX">
<code class="sig-name descname">OPTICAL_MODEL_MCX</code><em class="property"> = 'mcx'</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_MCX" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the mcx simulation.</p>
<p>Usage: module optical_simulation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_NUMBER_PHOTONS">
<code class="sig-name descname">OPTICAL_MODEL_NUMBER_PHOTONS</code><em class="property"> = ('optical_model_number_of_photons', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_NUMBER_PHOTONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of photons used in the optical simulation.</p>
<p>Usage: module optical_simulation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_OUTPUT_NAME">
<code class="sig-name descname">OPTICAL_MODEL_OUTPUT_NAME</code><em class="property"> = 'optical_forward_model_output'</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_OUTPUT_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the optical forward model output field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_SETTINGS">
<code class="sig-name descname">OPTICAL_MODEL_SETTINGS</code><em class="property"> = ('optical_model_settings', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd><p>Optical model settings</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_TEST">
<code class="sig-name descname">OPTICAL_MODEL_TEST</code><em class="property"> = 'simpa_tests'</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_TEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to an adapter for testing purposes only.</p>
<p>Usage: module optical_simulation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.OPTICAL_MODEL_UNITS">
<code class="sig-name descname">OPTICAL_MODEL_UNITS</code><em class="property"> = 'units'</em><a class="headerlink" href="#simpa.utils.tags.Tags.OPTICAL_MODEL_UNITS" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the optical forward model output units field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.ORIGINAL_DATA">
<code class="sig-name descname">ORIGINAL_DATA</code><em class="property"> = 'original_data'</em><a class="headerlink" href="#simpa.utils.tags.Tags.ORIGINAL_DATA" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the simulation outputs as original data in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PARALLELEPIPED_STRUCTURE">
<code class="sig-name descname">PARALLELEPIPED_STRUCTURE</code><em class="property"> = 'ParallelepipedStructure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PARALLELEPIPED_STRUCTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the ParallelepipedStructure in the structure_library.</p>
<p>Usage: module volume_creation_module, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PMLAlpha">
<code class="sig-name descname">PMLAlpha</code><em class="property"> = ('pml_alpha', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.PMLAlpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Alpha coefficient of the “perfectly matched layer” (PML) around the simulated volume in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PMLInside">
<code class="sig-name descname">PMLInside</code><em class="property"> = ('pml_inside', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.PMLInside" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the “perfectly matched layer” (PML) in kwave is located inside the volume.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PMLSize">
<code class="sig-name descname">PMLSize</code><em class="property"> = ('pml_size', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.PMLSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Size of the “perfectly matched layer” (PML) around the simulated volume in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PRIORITY">
<code class="sig-name descname">PRIORITY</code><em class="property"> = ('priority', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.PRIORITY" title="Permalink to this definition">¶</a></dt>
<dd><p>Number that corresponds to a priority of the assigned structure. If another structure occupies the same voxel 
in a volume, the structure with a higher priority will be preferred.</p>
<p>Usage: adapter versatile_volume_creator</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_ABSORPTION_PER_CM">
<code class="sig-name descname">PROPERTY_ABSORPTION_PER_CM</code><em class="property"> = 'mua'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_ABSORPTION_PER_CM" title="Permalink to this definition">¶</a></dt>
<dd><p>Optical absorption of the generated volume/structure in 1/cm.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_ALPHA_COEFF">
<code class="sig-name descname">PROPERTY_ALPHA_COEFF</code><em class="property"> = 'alpha_coeff'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_ALPHA_COEFF" title="Permalink to this definition">¶</a></dt>
<dd><p>Acoustic attenuation of kwave of the generated volume/structure in dB/cm/MHz.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_ALPHA_POWER">
<code class="sig-name descname">PROPERTY_ALPHA_POWER</code><em class="property"> = ('medium_alpha_power', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_ALPHA_POWER" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponent of the exponential acoustic attenuation law of kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_ANISOTROPY">
<code class="sig-name descname">PROPERTY_ANISOTROPY</code><em class="property"> = 'g'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_ANISOTROPY" title="Permalink to this definition">¶</a></dt>
<dd><p>Optical scattering anisotropy of the generated volume/structure.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_DENSITY">
<code class="sig-name descname">PROPERTY_DENSITY</code><em class="property"> = 'density'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_DENSITY" title="Permalink to this definition">¶</a></dt>
<dd><p>Density of the generated volume/structure in kg/m³.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_DIRECTIVITY_ANGLE">
<code class="sig-name descname">PROPERTY_DIRECTIVITY_ANGLE</code><em class="property"> = 'directivity_angle'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_DIRECTIVITY_ANGLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Directionality of the sensors in kwave of the used PA device.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_GRUNEISEN_PARAMETER">
<code class="sig-name descname">PROPERTY_GRUNEISEN_PARAMETER</code><em class="property"> = 'gamma'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_GRUNEISEN_PARAMETER" title="Permalink to this definition">¶</a></dt>
<dd><p>We define PROPERTY_GRUNEISEN_PARAMETER to contain all wavelength-independent constituents of the PA signal.
This means that it contains the percentage of absorbed light converted into heat.
Naturally, one could make an argument that this should not be the case, however, it simplifies the usage of 
this tool.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_INTRINSIC_EULER_ANGLE">
<code class="sig-name descname">PROPERTY_INTRINSIC_EULER_ANGLE</code><em class="property"> = 'intrinsic_euler_angle'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_INTRINSIC_EULER_ANGLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Intrinsic euler angles of the detector elements in the kWaveArray.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_OXYGENATION">
<code class="sig-name descname">PROPERTY_OXYGENATION</code><em class="property"> = 'oxy'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_OXYGENATION" title="Permalink to this definition">¶</a></dt>
<dd><p>Oxygenation of the generated volume/structure.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_SCATTERING_PER_CM">
<code class="sig-name descname">PROPERTY_SCATTERING_PER_CM</code><em class="property"> = 'mus'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_SCATTERING_PER_CM" title="Permalink to this definition">¶</a></dt>
<dd><p>Optical scattering (NOT REDUCED SCATTERING mus’! mus’=mus*(1-g) ) of the generated volume/structure in 1/cm.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_SEGMENTATION">
<code class="sig-name descname">PROPERTY_SEGMENTATION</code><em class="property"> = 'seg'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_SEGMENTATION" title="Permalink to this definition">¶</a></dt>
<dd><p>Segmentation of the generated volume/structure.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_SENSOR_MASK">
<code class="sig-name descname">PROPERTY_SENSOR_MASK</code><em class="property"> = 'sensor_mask'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_SENSOR_MASK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sensor mask of kwave of the used PA device.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PROPERTY_SPEED_OF_SOUND">
<code class="sig-name descname">PROPERTY_SPEED_OF_SOUND</code><em class="property"> = 'sos'</em><a class="headerlink" href="#simpa.utils.tags.Tags.PROPERTY_SPEED_OF_SOUND" title="Permalink to this definition">¶</a></dt>
<dd><p>Speed of sound of the generated volume/structure in m/s.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.PlotPML">
<code class="sig-name descname">PlotPML</code><em class="property"> = ('plot_pml', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.PlotPML" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the “perfectly matched layer” (PML) around the simulated volume in kwave is plotted.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RANDOM_SEED">
<code class="sig-name descname">RANDOM_SEED</code><em class="property"> = ('random_seed', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.RANDOM_SEED" title="Permalink to this definition">¶</a></dt>
<dd><p>Random seed for numpy and torch.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTED_DATA">
<code class="sig-name descname">RECONSTRUCTED_DATA</code><em class="property"> = 'reconstructed_data'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTED_DATA" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the reconstructed data field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTED_DATA_NOISE">
<code class="sig-name descname">RECONSTRUCTED_DATA_NOISE</code><em class="property"> = 'reconstructed_data_noise'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTED_DATA_NOISE" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the reconstructed data with applied noise field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM</code><em class="property"> = ('reconstruction_algorithm', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the used reconstruction algorithm.</p>
<p>Usage: module reconstruction_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_DAS">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM_DAS</code><em class="property"> = 'DAS'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_DAS" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the reconstruction algorithm DAS with the MitkBeamformingAdapter.</p>
<p>Usage: module reconstruction_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_DMAS">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM_DMAS</code><em class="property"> = 'DMAS'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_DMAS" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the reconstruction algorithm DMAS with the MitkBeamformingAdapter.</p>
<p>Usage: module reconstruction_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_PYTORCH_DAS">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM_PYTORCH_DAS</code><em class="property"> = 'PyTorch_DAS'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_PYTORCH_DAS" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the reconstruction algorithm DAS with the PyTorchDASAdapter.</p>
<p>Usage: module reconstruction_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_SDMAS">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM_SDMAS</code><em class="property"> = 'sDMAS'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_SDMAS" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the reconstruction algorithm sDMAS with the MitkBeamformingAdapter.</p>
<p>Usage: module reconstruction_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_TEST">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM_TEST</code><em class="property"> = 'TEST'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_TEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to an adapter for testing purposes only.</p>
<p>Usage: module reconstruction_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_TIME_REVERSAL">
<code class="sig-name descname">RECONSTRUCTION_ALGORITHM_TIME_REVERSAL</code><em class="property"> = 'time_reversal'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_ALGORITHM_TIME_REVERSAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the reconstruction algorithm Time Reversal with TimeReversalAdapter.</p>
<p>Usage: module reconstruction_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_BOX">
<code class="sig-name descname">RECONSTRUCTION_APODIZATION_BOX</code><em class="property"> = 'BoxApodization'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_BOX" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the box window function for apodization.</p>
<p>Usage: adapter PyTorchDASAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_HAMMING">
<code class="sig-name descname">RECONSTRUCTION_APODIZATION_HAMMING</code><em class="property"> = 'HammingApodization'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_HAMMING" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the Hamming window function for apodization.</p>
<p>Usage: adapter PyTorchDASAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_HANN">
<code class="sig-name descname">RECONSTRUCTION_APODIZATION_HANN</code><em class="property"> = 'HannApodization'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_HANN" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the Hann window function for apodization.</p>
<p>Usage: adapter PyTorchDASAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_METHOD">
<code class="sig-name descname">RECONSTRUCTION_APODIZATION_METHOD</code><em class="property"> = ('reconstruction_apodization_method', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_APODIZATION_METHOD" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the apodization method used, i.e. window functions .</p>
<p>Usage: adapter PyTorchDASAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_AFTER_RECONSTRUCTION">
<code class="sig-name descname">RECONSTRUCTION_BMODE_AFTER_RECONSTRUCTION</code><em class="property"> = 'Envelope_Detection_after_Reconstruction'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_AFTER_RECONSTRUCTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether an envelope detection should be performed after reconstruction, default is False
Usage: adapter PyTorchDASAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_BEFORE_RECONSTRUCTION">
<code class="sig-name descname">RECONSTRUCTION_BMODE_BEFORE_RECONSTRUCTION</code><em class="property"> = 'Envelope_Detection_before_Reconstruction'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_BEFORE_RECONSTRUCTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether an envelope detection should be performed before reconstruction, default is False
Usage: adapter PyTorchDASAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_METHOD">
<code class="sig-name descname">RECONSTRUCTION_BMODE_METHOD</code><em class="property"> = ('reconstruction_bmode_method', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_METHOD" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the B-Mode method used in the Mitk Beamforming.</p>
<p>Usage: adapter MitkBeamformingAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_METHOD_ABS">
<code class="sig-name descname">RECONSTRUCTION_BMODE_METHOD_ABS</code><em class="property"> = 'Abs'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_METHOD_ABS" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the absolute value as the B-Mode method used in the Mitk Beamforming.</p>
<p>Usage: adapter MitkBeamformingAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_METHOD_HILBERT_TRANSFORM">
<code class="sig-name descname">RECONSTRUCTION_BMODE_METHOD_HILBERT_TRANSFORM</code><em class="property"> = 'EnvelopeDetection'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_BMODE_METHOD_HILBERT_TRANSFORM" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the Hilbert transform as the B-Mode method used in the Mitk Beamforming.</p>
<p>Usage: adapter MitkBeamformingAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_INVERSE_CRIME">
<code class="sig-name descname">RECONSTRUCTION_INVERSE_CRIME</code><em class="property"> = ('reconstruction_inverse_crime', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_INVERSE_CRIME" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the Time Reversal reconstruction will commit the “inverse crime”.</p>
<p>Usage: TimeReversalAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MITK_BINARY_PATH">
<code class="sig-name descname">RECONSTRUCTION_MITK_BINARY_PATH</code><em class="property"> = ('reconstruction_mitk_binary_path', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MITK_BINARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the Mitk Beamforming script.</p>
<p>Usage: adapter MitkBeamformingAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MITK_SETTINGS_XML">
<code class="sig-name descname">RECONSTRUCTION_MITK_SETTINGS_XML</code><em class="property"> = ('reconstruction_mitk_settings_xml', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MITK_SETTINGS_XML" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the Mitk Beamforming script settings.</p>
<p>Usage: adapter MitkBeamformingAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MODE">
<code class="sig-name descname">RECONSTRUCTION_MODE</code><em class="property"> = ('reconstruction_mode', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MODE" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the reconstruction mode used in the Backprojection.</p>
<p>Usage: adapter BackprojectionAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MODEL_SETTINGS">
<code class="sig-name descname">RECONSTRUCTION_MODEL_SETTINGS</code><em class="property"> = ('reconstruction_model_settings', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MODEL_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Reconstruction Model Settings</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MODE_DIFFERENTIAL">
<code class="sig-name descname">RECONSTRUCTION_MODE_DIFFERENTIAL</code><em class="property"> = 'differential'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MODE_DIFFERENTIAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the differential mode used in the Backprojection.</p>
<p>Usage: adapter BackprojectionAdapter, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MODE_FULL">
<code class="sig-name descname">RECONSTRUCTION_MODE_FULL</code><em class="property"> = 'full'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MODE_FULL" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the full mode used in the Backprojection.</p>
<p>Usage: adapter BackprojectionAdapter, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_MODE_PRESSURE">
<code class="sig-name descname">RECONSTRUCTION_MODE_PRESSURE</code><em class="property"> = 'pressure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_MODE_PRESSURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the pressure mode used in the Backprojection.</p>
<p>Usage: adapter BackprojectionAdapter, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_OUTPUT_NAME">
<code class="sig-name descname">RECONSTRUCTION_OUTPUT_NAME</code><em class="property"> = ('reconstruction_result', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_OUTPUT_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the image reconstruction result.</p>
<p>Usage: adapter MitkBeamformingAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECONSTRUCTION_PERFORM_BANDPASS_FILTERING">
<code class="sig-name descname">RECONSTRUCTION_PERFORM_BANDPASS_FILTERING</code><em class="property"> = ('reconstruction_perform_bandpass_filtering', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECONSTRUCTION_PERFORM_BANDPASS_FILTERING" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether bandpass filtering should be applied or not. Default should be True</p>
<p>Usage: adapter PyTorchDASAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECORDMOVIE">
<code class="sig-name descname">RECORDMOVIE</code><em class="property"> = ('record_movie', (&lt;class 'bool'&gt;, &lt;class 'bool'&gt;, &lt;class 'numpy.bool_'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECORDMOVIE" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, a movie of the kwave simulation will be recorded.</p>
<p>Usage: adapter KwaveAcousticForwardModel</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.RECTANGULAR_CUBOID_STRUCTURE">
<code class="sig-name descname">RECTANGULAR_CUBOID_STRUCTURE</code><em class="property"> = 'RectangularCuboidStructure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.RECTANGULAR_CUBOID_STRUCTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the RectangularCuboidStructure in the structure_library.</p>
<p>Usage: module volume_creation_module, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SEGMENTATION_CLASS_MAPPING">
<code class="sig-name descname">SEGMENTATION_CLASS_MAPPING</code><em class="property"> = ('segmentation_class_mapping', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.SEGMENTATION_CLASS_MAPPING" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping that assigns every class in the INPUT_SEGMENTATION_VOLUME a MOLECULE_COMPOSITION.</p>
<p>Usage: adapter segmentation_based_volume_creator</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_BANDWIDTH_PERCENT">
<code class="sig-name descname">SENSOR_BANDWIDTH_PERCENT</code><em class="property"> = ('sensor_bandwidth', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_BANDWIDTH_PERCENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Sensor bandwidth in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_CENTER_FREQUENCY_HZ">
<code class="sig-name descname">SENSOR_CENTER_FREQUENCY_HZ</code><em class="property"> = ('sensor_center_frequency', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_CENTER_FREQUENCY_HZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Sensor center frequency in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_CONCAVE">
<code class="sig-name descname">SENSOR_CONCAVE</code><em class="property"> = 'concave'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_CONCAVE" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates that the geometry of the used PA device in the Mitk Beamforming is concave.</p>
<p>Usage: adapter MitkBeamformingAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_DIRECTIVITY_PATTERN">
<code class="sig-name descname">SENSOR_DIRECTIVITY_PATTERN</code><em class="property"> = 'sensor_directivity_pattern'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_DIRECTIVITY_PATTERN" title="Permalink to this definition">¶</a></dt>
<dd><p>Sensor directivity pattern of the sensor in kwave. Default should be “pressure”.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_DIRECTIVITY_SIZE_M">
<code class="sig-name descname">SENSOR_DIRECTIVITY_SIZE_M</code><em class="property"> = ('sensor_directivity_size', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_DIRECTIVITY_SIZE_M" title="Permalink to this definition">¶</a></dt>
<dd><p>Size of each detector element in kwave.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_ELEMENT_POSITIONS">
<code class="sig-name descname">SENSOR_ELEMENT_POSITIONS</code><em class="property"> = 'sensor_element_positions'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_ELEMENT_POSITIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of detector elements that fit into the generated volume if the dimensions and/or spacing of the generated 
volume were not highly resolved enough to be sufficient for the selected PA device.</p>
<p>Usage: module acoustic_forward_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_LINEAR">
<code class="sig-name descname">SENSOR_LINEAR</code><em class="property"> = 'linear'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_LINEAR" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates that the geometry of the used PA device in the Mitk Beamforming is linear.</p>
<p>Usage: adapter MitkBeamformingAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_NUM_ELEMENTS">
<code class="sig-name descname">SENSOR_NUM_ELEMENTS</code><em class="property"> = ('sensor_num_elements', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_NUM_ELEMENTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of detector elements for kwave if no device was selected.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_NUM_USED_ELEMENTS">
<code class="sig-name descname">SENSOR_NUM_USED_ELEMENTS</code><em class="property"> = ('sensor_num_used_elements', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_NUM_USED_ELEMENTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of detector elements that fit into the generated volume if the dimensions and/or spacing of the generated 
volume were not highly resolved enough to be sufficient for the selected PA device.</p>
<p>Usage: module acoustic_forward_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_PITCH_MM">
<code class="sig-name descname">SENSOR_PITCH_MM</code><em class="property"> = 'sensor_pitch_mm'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_PITCH_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Pitch of detector elements of the used PA device.</p>
<p>Usage: adapter AcousticForwardModelKWaveAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_RADIUS_MM">
<code class="sig-name descname">SENSOR_RADIUS_MM</code><em class="property"> = 'sensor_radius_mm'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_RADIUS_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Radius of a concave geometry of the used PA device.</p>
<p>Usage: adapter AcousticForwardModelKWaveAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_RECORD">
<code class="sig-name descname">SENSOR_RECORD</code><em class="property"> = ('sensor_record', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_RECORD" title="Permalink to this definition">¶</a></dt>
<dd><p>Sensor Record mode of the sensor in kwave. Default should be “p”.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SENSOR_SAMPLING_RATE_MHZ">
<code class="sig-name descname">SENSOR_SAMPLING_RATE_MHZ</code><em class="property"> = ('sensor_sampling_rate_mhz', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SENSOR_SAMPLING_RATE_MHZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Sampling rate of the used PA device.</p>
<p>Usage: adapter KwaveAcousticForwardModel, adapter TimeReversalAdapter, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SETTINGS">
<code class="sig-name descname">SETTINGS</code><em class="property"> = 'settings'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of the simulation settings in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SIMPA_OUTPUT_NAME">
<code class="sig-name descname">SIMPA_OUTPUT_NAME</code><em class="property"> = 'simpa_output.hdf5'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SIMPA_OUTPUT_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Default filename of the SIMPA output if not specified otherwise.</p>
<p>Usage: SIMPA package, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SIMPA_OUTPUT_PATH">
<code class="sig-name descname">SIMPA_OUTPUT_PATH</code><em class="property"> = ('simpa_output_path', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.SIMPA_OUTPUT_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Default path of the SIMPA output if not specified otherwise.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SIMULATE_DEFORMED_LAYERS">
<code class="sig-name descname">SIMULATE_DEFORMED_LAYERS</code><em class="property"> = ('simulate_deformed_layers', &lt;class 'bool'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.SIMULATE_DEFORMED_LAYERS" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the horizontal layers are deformed according to the DEFORMED_LAYERS_SETTINGS.</p>
<p>Usage: adapter versatile_volume_creation</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SIMULATIONS">
<code class="sig-name descname">SIMULATIONS</code><em class="property"> = 'simulations'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SIMULATIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of the simulation outputs in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SIMULATION_PATH">
<code class="sig-name descname">SIMULATION_PATH</code><em class="property"> = ('simulation_path', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.SIMULATION_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the folder where the SIMPA output is saved.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SIMULATION_PROPERTIES">
<code class="sig-name descname">SIMULATION_PROPERTIES</code><em class="property"> = 'simulation_properties'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SIMULATION_PROPERTIES" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of the simulation properties in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SPACING_MM">
<code class="sig-name descname">SPACING_MM</code><em class="property"> = ('voxel_spacing_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.SPACING_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Isotropic extent of one voxels in mm in the generated volume.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.SPHERICAL_STRUCTURE">
<code class="sig-name descname">SPHERICAL_STRUCTURE</code><em class="property"> = 'SphericalStructure'</em><a class="headerlink" href="#simpa.utils.tags.Tags.SPHERICAL_STRUCTURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the SphericalStructure in the structure_library.</p>
<p>Usage: module volume_creation_module, naming_convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURES">
<code class="sig-name descname">STRUCTURES</code><em class="property"> = ('structures', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURES" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings dictionary which contains all the structures that should be generated inside the volume.</p>
<p>Usage: module volume_creation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_BIFURCATION_LENGTH_MM">
<code class="sig-name descname">STRUCTURE_BIFURCATION_LENGTH_MM</code><em class="property"> = ('structure_bifurcation_length_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_BIFURCATION_LENGTH_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Length after which a VesselStructure will bifurcate.</p>
<p>Usage: adapter versatile_volume_creation, class VesselStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_CURVATURE_FACTOR">
<code class="sig-name descname">STRUCTURE_CURVATURE_FACTOR</code><em class="property"> = ('structure_curvature_factor', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_CURVATURE_FACTOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Factor that determines how strongly a vessel tree is curved.</p>
<p>Usage: adapter versatile_volume_creation, class VesselStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_DIRECTION">
<code class="sig-name descname">STRUCTURE_DIRECTION</code><em class="property"> = ('structure_direction', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_DIRECTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Direction as [x, y, z] vector starting from STRUCTURE_START_MM in which the vessel will grow.</p>
<p>Usage: adapter versatile_volume_creation, class VesselStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_ECCENTRICITY">
<code class="sig-name descname">STRUCTURE_ECCENTRICITY</code><em class="property"> = ('structure_excentricity', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_ECCENTRICITY" title="Permalink to this definition">¶</a></dt>
<dd><p>Eccentricity of the structure.</p>
<p>Usage: adapter versatile_volume_creation, class EllipticalTubularStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_END_MM">
<code class="sig-name descname">STRUCTURE_END_MM</code><em class="property"> = ('structure_end', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_END_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Ending of the structure as [x, y, z] coordinates in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class GeometricalStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_FIRST_EDGE_MM">
<code class="sig-name descname">STRUCTURE_FIRST_EDGE_MM</code><em class="property"> = ('structure_first_edge_mm', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_FIRST_EDGE_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Edge of the structure as [x, y, z] vector starting from STRUCTURE_START_MM in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class ParallelepipedStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_RADIUS_MM">
<code class="sig-name descname">STRUCTURE_RADIUS_MM</code><em class="property"> = ('structure_radius', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_RADIUS_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Radius of the structure.</p>
<p>Usage: adapter versatile_volume_creation, class GeometricalStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_RADIUS_VARIATION_FACTOR">
<code class="sig-name descname">STRUCTURE_RADIUS_VARIATION_FACTOR</code><em class="property"> = ('structure_radius_variation_factor', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_RADIUS_VARIATION_FACTOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Factor that determines how strongly a the radius of vessel tree varies.</p>
<p>Usage: adapter versatile_volume_creation, class VesselStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_SECOND_EDGE_MM">
<code class="sig-name descname">STRUCTURE_SECOND_EDGE_MM</code><em class="property"> = ('structure_second_edge_mm', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_SECOND_EDGE_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Edge of the structure as [x, y, z] vector starting from STRUCTURE_START_MM in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class ParallelepipedStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_SEGMENTATION_TYPE">
<code class="sig-name descname">STRUCTURE_SEGMENTATION_TYPE</code><em class="property"> = 'structure_segmentation_type'</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_SEGMENTATION_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the structure segmentation type to one segmentation type in SegmentationClasses.</p>
<p>Usage: module volume_creation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_START_MM">
<code class="sig-name descname">STRUCTURE_START_MM</code><em class="property"> = ('structure_start', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_START_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Beginning of the structure as [x, y, z] coordinates in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class GeometricalStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_THIRD_EDGE_MM">
<code class="sig-name descname">STRUCTURE_THIRD_EDGE_MM</code><em class="property"> = ('structure_third_edge_mm', (&lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_THIRD_EDGE_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Edge of the structure as [x, y, z] vector starting from STRUCTURE_START_MM in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class ParallelepipedStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_TYPE">
<code class="sig-name descname">STRUCTURE_TYPE</code><em class="property"> = ('structure_type', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the structure type to one structure in the structure_library.</p>
<p>Usage: module volume_creation_module</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_X_EXTENT_MM">
<code class="sig-name descname">STRUCTURE_X_EXTENT_MM</code><em class="property"> = ('structure_x_extent_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_X_EXTENT_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>X-extent of the structure in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class RectangularCuboidStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_Y_EXTENT_MM">
<code class="sig-name descname">STRUCTURE_Y_EXTENT_MM</code><em class="property"> = ('structure_y_extent_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_Y_EXTENT_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Y-extent of the structure in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class RectangularCuboidStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.STRUCTURE_Z_EXTENT_MM">
<code class="sig-name descname">STRUCTURE_Z_EXTENT_MM</code><em class="property"> = ('structure_z_extent_mm', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.STRUCTURE_Z_EXTENT_MM" title="Permalink to this definition">¶</a></dt>
<dd><p>Z-extent of the structure in the generated volume.</p>
<p>Usage: adapter versatile_volume_creation, class RectangularCuboidStructure</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.TIME_SERIES_DATA">
<code class="sig-name descname">TIME_SERIES_DATA</code><em class="property"> = 'time_series_data'</em><a class="headerlink" href="#simpa.utils.tags.Tags.TIME_SERIES_DATA" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the time series data field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.TIME_SERIES_DATA_NOISE">
<code class="sig-name descname">TIME_SERIES_DATA_NOISE</code><em class="property"> = 'time_series_data_noise'</em><a class="headerlink" href="#simpa.utils.tags.Tags.TIME_SERIES_DATA_NOISE" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the time series data with applied noise field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.TIME_STEP">
<code class="sig-name descname">TIME_STEP</code><em class="property"> = ('time_step', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.TIME_STEP" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporal resolution of mcx.</p>
<p>Usage: adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.TISSUE_PROPERTIES_OUPUT_NAME">
<code class="sig-name descname">TISSUE_PROPERTIES_OUPUT_NAME</code><em class="property"> = 'properties'</em><a class="headerlink" href="#simpa.utils.tags.Tags.TISSUE_PROPERTIES_OUPUT_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the simulation properties field in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.TOTAL_TIME">
<code class="sig-name descname">TOTAL_TIME</code><em class="property"> = ('total_time', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.TOTAL_TIME" title="Permalink to this definition">¶</a></dt>
<dd><p>Total simulated time in mcx.</p>
<p>Usage: adapter mcx_adapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.TUKEY_WINDOW_ALPHA">
<code class="sig-name descname">TUKEY_WINDOW_ALPHA</code><em class="property"> = ('tukey_window_alpha', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;, &lt;class 'float'&gt;, &lt;class 'float'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.TUKEY_WINDOW_ALPHA" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets alpha value of Tukey window between 0 (similar to box window) and 1 (similar to Hann window).
Default is 0.5</p>
<p>Usage: adapter PyTorchDASAdapter</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.UNITS_ARBITRARY">
<code class="sig-name descname">UNITS_ARBITRARY</code><em class="property"> = 'arbitrary_unity'</em><a class="headerlink" href="#simpa.utils.tags.Tags.UNITS_ARBITRARY" title="Permalink to this definition">¶</a></dt>
<dd><p>Define arbitrary units if no units were given in the settings.</p>
<p>Usage: module optical_simulation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.UNITS_PRESSURE">
<code class="sig-name descname">UNITS_PRESSURE</code><em class="property"> = 'newton_per_meters_squared'</em><a class="headerlink" href="#simpa.utils.tags.Tags.UNITS_PRESSURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard units used in the SIMPA framework.</p>
<p>Usage: module optical_simulation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.UPSAMPLED_DATA">
<code class="sig-name descname">UPSAMPLED_DATA</code><em class="property"> = 'upsampled_data'</em><a class="headerlink" href="#simpa.utils.tags.Tags.UPSAMPLED_DATA" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the simulation outputs as upsampled data in the SIMPA output file.</p>
<p>Usage: naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.US_GEL">
<code class="sig-name descname">US_GEL</code><em class="property"> = ('us_gel', &lt;class 'bool'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.US_GEL" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, us gel is placed between the PA device and the simulated volume.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.VOLUME_CREATION_MODEL_SETTINGS">
<code class="sig-name descname">VOLUME_CREATION_MODEL_SETTINGS</code><em class="property"> = ('volume_creation_model_settings', &lt;class 'dict'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.VOLUME_CREATION_MODEL_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Volume Creation Model Settings</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.VOLUME_CREATOR">
<code class="sig-name descname">VOLUME_CREATOR</code><em class="property"> = ('volume_creator', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.VOLUME_CREATOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice of the volume creator adapter.</p>
<p>Usage: module volume_creation_module, module device_digital_twins</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.VOLUME_CREATOR_SEGMENTATION_BASED">
<code class="sig-name descname">VOLUME_CREATOR_SEGMENTATION_BASED</code><em class="property"> = 'volume_creator_segmentation_based'</em><a class="headerlink" href="#simpa.utils.tags.Tags.VOLUME_CREATOR_SEGMENTATION_BASED" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the SegmentationBasedVolumeCreator.</p>
<p>Usage: module volume_creation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.VOLUME_CREATOR_VERSATILE">
<code class="sig-name descname">VOLUME_CREATOR_VERSATILE</code><em class="property"> = 'volume_creator_versatile'</em><a class="headerlink" href="#simpa.utils.tags.Tags.VOLUME_CREATOR_VERSATILE" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponds to the ModelBasedVolumeCreator.</p>
<p>Usage: module volume_creation_module, naming convention</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.VOLUME_NAME">
<code class="sig-name descname">VOLUME_NAME</code><em class="property"> = ('volume_name', &lt;class 'str'&gt;)</em><a class="headerlink" href="#simpa.utils.tags.Tags.VOLUME_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the SIMPA output file.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.WAVELENGTH">
<code class="sig-name descname">WAVELENGTH</code><em class="property"> = ('wavelength', (&lt;class 'int'&gt;, &lt;class 'numpy.integer'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.WAVELENGTH" title="Permalink to this definition">¶</a></dt>
<dd><p>Single wavelength used for the current simulation.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

<dl class="attribute">
<dt id="simpa.utils.tags.Tags.WAVELENGTHS">
<code class="sig-name descname">WAVELENGTHS</code><em class="property"> = ('wavelengths', (&lt;class 'list'&gt;, &lt;class 'range'&gt;, &lt;class 'tuple'&gt;, &lt;class 'numpy.ndarray'&gt;))</em><a class="headerlink" href="#simpa.utils.tags.Tags.WAVELENGTHS" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterable of all the wavelengths used for the simulation.</p>
<p>Usage: SIMPA package</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.utils.tissue_properties"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.tissue_properties.TissueProperties">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.tissue_properties.</code><code class="sig-name descname">TissueProperties</code><a class="headerlink" href="#simpa.utils.tissue_properties.TissueProperties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="section" id="libraries">
<h3>Libraries<a class="headerlink" href="#libraries" title="Permalink to this headline">¶</a></h3>
<p>Another important aspect of the utils class is the libraries that are being provided.
These contain compilations of literature values for the acoustic and optical properties
of commonly used tissue.</p>
<span class="target" id="module-simpa.utils.libraries"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<span class="target" id="module-simpa.utils.libraries.molecule_library"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.libraries.molecule_library.MolecularComposition">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.molecule_library.</code><code class="sig-name descname">MolecularComposition</code><span class="sig-paren">(</span><em class="sig-param">segmentation_type=None</em>, <em class="sig-param">molecular_composition_settings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.molecule_library.MolecularComposition" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="simpa.utils.libraries.molecule_library.MolecularComposition.update_internal_properties">
<code class="sig-name descname">update_internal_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.molecule_library.MolecularComposition.update_internal_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>FIXME</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.molecule_library.MolecularCompositionGenerator">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.molecule_library.</code><code class="sig-name descname">MolecularCompositionGenerator</code><a class="headerlink" href="#simpa.utils.libraries.molecule_library.MolecularCompositionGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>The MolecularCompositionGenerator is a helper class to facilitate the creation of a
MolecularComposition instance.</p>
</dd></dl>

<span class="target" id="module-simpa.utils.libraries.literature_values"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.libraries.literature_values.MorphologicalTissueProperties">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.literature_values.</code><code class="sig-name descname">MorphologicalTissueProperties</code><a class="headerlink" href="#simpa.utils.libraries.literature_values.MorphologicalTissueProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>This class contains a listing of morphological tissue parameters as reported in literature.
The listing is not the result of a meta analysis, but rather uses the best fitting paper at
the time pf implementation.
Each of the fields is annotated with a literature reference or a descriptions of how the particular
values were derived for tissue modelling.</p>
</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.literature_values.OpticalTissueProperties">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.literature_values.</code><code class="sig-name descname">OpticalTissueProperties</code><a class="headerlink" href="#simpa.utils.libraries.literature_values.OpticalTissueProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>This class contains a listing of optical tissue parameters as reported in literature.
The listing is not the result of a meta analysis, but rather uses the best fitting paper at
the time pf implementation.
Each of the fields is annotated with a literature reference or a descriptions of how the particular
values were derived for tissue modelling.</p>
</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.literature_values.StandardProperties">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.literature_values.</code><code class="sig-name descname">StandardProperties</code><a class="headerlink" href="#simpa.utils.libraries.literature_values.StandardProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>This class contains a listing of default parameters that can be used.
These values are sensible default values but are generally not backed up by proper scientific references,
or are rather specific for internal use cases.</p>
</dd></dl>

<span class="target" id="module-simpa.utils.libraries.spectra_library"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.libraries.spectra_library.Spectrum">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.spectra_library.</code><code class="sig-name descname">Spectrum</code><span class="sig-paren">(</span><em class="sig-param">spectrum_name: str</em>, <em class="sig-param">wavelengths: numpy.ndarray</em>, <em class="sig-param">values: numpy.ndarray</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.spectra_library.Spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of this class represents the absorption spectrum over wavelength for a particular</p>
<dl class="method">
<dt id="simpa.utils.libraries.spectra_library.Spectrum.get_value_for_wavelength">
<code class="sig-name descname">get_value_for_wavelength</code><span class="sig-paren">(</span><em class="sig-param">wavelength: int</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#simpa.utils.libraries.spectra_library.Spectrum.get_value_for_wavelength" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wavelength</strong> – the wavelength to retrieve a optical absorption value for [cm^{-1}].
Must be an integer value between the minimum and maximum wavelength.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the best matching linearly interpolated absorption value for the given wavelength.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.spectra_library.Spectrum.get_value_over_wavelength">
<code class="sig-name descname">get_value_over_wavelength</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.spectra_library.Spectrum.get_value_over_wavelength" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>numpy array with the available wavelengths and the corresponding absorption properties</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="simpa.utils.libraries.spectra_library.view_absorption_spectra">
<code class="sig-prename descclassname">simpa.utils.libraries.spectra_library.</code><code class="sig-name descname">view_absorption_spectra</code><span class="sig-paren">(</span><em class="sig-param">save_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.spectra_library.view_absorption_spectra" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a matplotlib plot and visualizes the available absorption spectra.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>save_path</strong> – If not None, then the figure will be saved as a png file to the destination.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-simpa.utils.libraries.tissue_library"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.tissue_library.</code><code class="sig-name descname">TissueLibrary</code><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO</p>
<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.blood">
<code class="sig-name descname">blood</code><span class="sig-paren">(</span><em class="sig-param">oxygenation=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.blood" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a settings dictionary containing all min and max parameters fitting for full blood.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.bone">
<code class="sig-name descname">bone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.bone" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a settings dictionary containing all min and max parameters fitting for full blood.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.constant">
<code class="sig-name descname">constant</code><span class="sig-paren">(</span><em class="sig-param">mua=1e-10</em>, <em class="sig-param">mus=1e-10</em>, <em class="sig-param">g=1e-10</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.constant" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.dermis">
<code class="sig-name descname">dermis</code><span class="sig-paren">(</span><em class="sig-param">background_oxy=None</em>, <em class="sig-param">blood_volume_fraction=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.dermis" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a settings dictionary containing all min and max parameters fitting for dermis tissue.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.epidermis">
<code class="sig-name descname">epidermis</code><span class="sig-paren">(</span><em class="sig-param">melanosom_volume_fraction=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.epidermis" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a settings dictionary containing all min and max parameters fitting for epidermis tissue.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.get_blood_volume_fractions">
<code class="sig-name descname">get_blood_volume_fractions</code><span class="sig-paren">(</span><em class="sig-param">total_blood_volume_fraction=1e-10</em>, <em class="sig-param">oxygenation=1e-10</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.get_blood_volume_fractions" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.muscle">
<code class="sig-name descname">muscle</code><span class="sig-paren">(</span><em class="sig-param">background_oxy=None</em>, <em class="sig-param">blood_volume_fraction=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.muscle" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a settings dictionary containing all min and max parameters fitting for muscle tissue.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.soft_tissue">
<code class="sig-name descname">soft_tissue</code><span class="sig-paren">(</span><em class="sig-param">background_oxy=None</em>, <em class="sig-param">blood_volume_fraction=None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.soft_tissue" title="Permalink to this definition">¶</a></dt>
<dd><p>IMPORTANT! This tissue is not tested and it is not based on a specific real tissue type.
It is a mixture of muscle (mostly optical properties) and water (mostly acoustic properties).
This tissue type roughly resembles the generic background tissue that we see in real PA images.
:return: a settings dictionary containing all min and max parameters fitting for generic soft tissue.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.tissue_library.TissueLibrary.subcutaneous_fat">
<code class="sig-name descname">subcutaneous_fat</code><span class="sig-paren">(</span><em class="sig-param">oxy=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.tissue_library.TissueLibrary.subcutaneous_fat" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a settings dictionary containing all min and max parameters fitting for subcutaneous fat tissue.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-simpa.utils.libraries.structure_library"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.utils.libraries.structure_library.Background">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">Background</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">background_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.Background" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a background that fills the whole simulation volume. It is always given the priority of 0 so that other
structures can overwrite it when necessary.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">background_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
<span class="n">background_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="n">background_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">BACKGROUND</span>
</pre></div>
</div>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.Background.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.Background.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.Background.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.Background.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.Background.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#simpa.utils.libraries.structure_library.Background.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.CircularTubularStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">CircularTubularStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.CircularTubularStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a circular tube which is defined by a start and end point as well as a radius. This structure implements
partial volume effects. The tube can be set to adhere to a deformation defined by the
simpa.utils.deformation_manager. The start and end points of the tube will then be shifted along the z-axis
accordingly.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure = Settings()</p>
<p>structure[Tags.PRIORITY] = 9
structure[Tags.STRUCTURE_START_MM] = [50, 0, 50]
structure[Tags.STRUCTURE_END_MM] = [50, 100, 50]
structure[Tags.STRUCTURE_RADIUS_MM] = 5
structure[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.blood()
structure[Tags.CONSIDER_PARTIAL_VOLUME] = True
structure[Tags.ADHERE_TO_DEFORMATION] = True
structure[Tags.STRUCTURE_TYPE] = Tags.CIRCULAR_TUBULAR_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.CircularTubularStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.CircularTubularStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.CircularTubularStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.CircularTubularStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.CircularTubularStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.CircularTubularStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.EllipticalTubularStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">EllipticalTubularStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.EllipticalTubularStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a elliptical tube which is defined by a start and end point as well as a radius and an eccentricity. The
elliptical geometry corresponds to a circular tube of the specified radius which is compressed along the z-axis
until it reaches the specified eccentricity under the assumption of a constant volume. This structure implements
partial volume effects. The tube can be set to adhere to a deformation defined by the
simpa.utils.deformation_manager. The start and end points of the tube will then be shifted along the z-axis
accordingly.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure = Settings()</p>
<p>structure[Tags.PRIORITY] = 9
structure[Tags.STRUCTURE_START_MM] = [50, 0, 50]
structure[Tags.STRUCTURE_END_MM] = [50, 100, 50]
structure[Tags.STRUCTURE_RADIUS_MM] = 5
structure[Tags.STRUCTURE_ECCENTRICITY] = 0.8
structure[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.blood()
structure[Tags.CONSIDER_PARTIAL_VOLUME] = True
structure[Tags.ADHERE_TO_DEFORMATION] = True
structure[Tags.STRUCTURE_TYPE] = Tags.ELLIPTICAL_TUBULAR_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.EllipticalTubularStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.EllipticalTubularStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.EllipticalTubularStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.EllipticalTubularStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.EllipticalTubularStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.EllipticalTubularStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.GeometricalStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">GeometricalStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.GeometricalStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all model-based structures for ModelBasedVolumeCreator. A GeometricalStructure has an internal
representation of its own geometry. This is represented by self.geometrical_volume which is a 3D array that defines
for every voxel within the simulation volume if it is enclosed in the GeometricalStructure or if it is outside.
Most of the GeometricalStructures implement a partial volume effect. So if a voxel has the value 1, it is completely
enclosed by the GeometricalStructure. If a voxel has a value between 0 and 1, that fraction of the volume is
occupied by the GeometricalStructure. If a voxel has the value 0, it is outside of the GeometricalStructure.</p>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.GeometricalStructure.fill_internal_volume">
<code class="sig-name descname">fill_internal_volume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.GeometricalStructure.fill_internal_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills self.geometrical_volume of the GeometricalStructure.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.GeometricalStructure.get_enclosed_indices">
<em class="property">abstract </em><code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.GeometricalStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.GeometricalStructure.get_params_from_settings">
<em class="property">abstract </em><code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.GeometricalStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.GeometricalStructure.properties_for_wavelength">
<code class="sig-name descname">properties_for_wavelength</code><span class="sig-paren">(</span><em class="sig-param">wavelength</em><span class="sig-paren">)</span> &#x2192; simpa.utils.tissue_properties.TissueProperties<a class="headerlink" href="#simpa.utils.libraries.structure_library.GeometricalStructure.properties_for_wavelength" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the values corresponding to each optical/acoustic property used in SIMPA.
:param wavelength: Wavelength of the queried properties
:return: optical/acoustic properties</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.GeometricalStructure.to_settings">
<em class="property">abstract </em><code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; simpa.utils.settings.Settings<a class="headerlink" href="#simpa.utils.libraries.structure_library.GeometricalStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.HorizontalLayerStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">HorizontalLayerStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.HorizontalLayerStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a Layer structure which spans the xy-plane in the SIMPA axis convention. The thickness of the layer is
defined along the z-axis. This layer can be deformed by the simpa.utils.deformation_manager.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure = Settings()</p>
<p>structure[Tags.PRIORITY] = 10
structure[Tags.STRUCTURE_START_MM] = [0, 0, 0]
structure[Tags.STRUCTURE_END_MM] = [0, 0, 100]
structure[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.epidermis()
structure[Tags.CONSIDER_PARTIAL_VOLUME] = True
structure[Tags.ADHERE_TO_DEFORMATION] = True
structure[Tags.STRUCTURE_TYPE] = Tags.HORIZONTAL_LAYER_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.HorizontalLayerStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.HorizontalLayerStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.HorizontalLayerStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.HorizontalLayerStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.HorizontalLayerStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.HorizontalLayerStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.ParallelepipedStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">ParallelepipedStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.ParallelepipedStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a parallelepiped which is defined by a start point and three edge vectors which originate from the start
point. This structure currently does not implement partial volume effects.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure = Settings()</p>
<p>structure[Tags.PRIORITY] = 9
structure[Tags.STRUCTURE_START_MM] = [25, 25, 25]
structure[Tags.STRUCTURE_FIRST_EDGE_MM] = [5, 1, 1]
structure[Tags.STRUCTURE_SECOND_EDGE_MM] = [1, 5, 1]
structure[Tags.STRUCTURE_THIRD_EDGE_MM] = [1, 1, 5]
structure[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.muscle()
structure[Tags.STRUCTURE_TYPE] = Tags.PARALLELEPIPED_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.ParallelepipedStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.ParallelepipedStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.ParallelepipedStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.ParallelepipedStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.ParallelepipedStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.ParallelepipedStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.RectangularCuboidStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">RectangularCuboidStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.RectangularCuboidStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a rectangular cuboid (box) which is defined by a start point its extent along the x-, y-, and z-axis.
This structure implements partial volume effects. The box can be set to adhere to a deformation defined by the
simpa.utils.deformation_manager. The start point of the box will then be shifted along the z-axis
accordingly.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure = Settings()</p>
<p>structure[Tags.PRIORITY] = 9
structure[Tags.STRUCTURE_START_MM] = [25, 25, 25]
structure[Tags.STRUCTURE_X_EXTENT_MM] = 40
structure[Tags.STRUCTURE_Y_EXTENT_MM] = 50
structure[Tags.STRUCTURE_Z_EXTENT_MM] = 60
structure[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.muscle()
structure[Tags.CONSIDER_PARTIAL_VOLUME] = True
structure[Tags.ADHERE_TO_DEFORMATION] = True
structure[Tags.STRUCTURE_TYPE] = Tags.RECTANGULAR_CUBOID_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.RectangularCuboidStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.RectangularCuboidStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.RectangularCuboidStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.RectangularCuboidStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.RectangularCuboidStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.RectangularCuboidStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.SphericalStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">SphericalStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.SphericalStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a sphere which is defined by a start point and a radius. This structure implements
partial volume effects. The sphere can be set to adhere to a deformation defined by the
simpa.utils.deformation_manager. The start point of the sphere will then be shifted along the z-axis
accordingly.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure = Settings()</p>
<p>structure[Tags.PRIORITY] = 9
structure[Tags.STRUCTURE_START_MM] = [50, 50, 50]
structure[Tags.STRUCTURE_RADIUS_MM] = 10
structure[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.blood()
structure[Tags.CONSIDER_PARTIAL_VOLUME] = True
structure[Tags.ADHERE_TO_DEFORMATION] = True
structure[Tags.STRUCTURE_TYPE] = Tags.SPHERICAL_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.SphericalStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.SphericalStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.SphericalStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.SphericalStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.SphericalStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.SphericalStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.Structures">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">Structures</code><span class="sig-paren">(</span><em class="sig-param">settings: simpa.utils.settings.Settings</em>, <em class="sig-param">volume_creator_settings: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.Structures" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO</p>
</dd></dl>

<dl class="class">
<dt id="simpa.utils.libraries.structure_library.VesselStructure">
<em class="property">class </em><code class="sig-prename descclassname">simpa.utils.libraries.structure_library.</code><code class="sig-name descname">VesselStructure</code><span class="sig-paren">(</span><em class="sig-param">global_settings: simpa.utils.settings.Settings</em>, <em class="sig-param">single_structure_settings: simpa.utils.settings.Settings = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.VesselStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a vessel tree that is generated randomly in the simulation volume. The generation process begins at the
start with a specified radius. The vessel grows roughly in the specified direction. The deviation is specified by
the curvature factor. Furthermore, the radius of the vessel can vary depending on the specified radius variation
factor. The bifurcation length defines how long a vessel can get until it will bifurcate. This structure implements
partial volume effects.
Example usage:</p>
<blockquote>
<div><p># single_structure_settings initialization
structure_settings = Settings()</p>
<p>structure_settings[Tags.PRIORITY] = 10
structure_settings[Tags.STRUCTURE_START_MM] = [50, 0, 50]
structure_settings[Tags.STRUCTURE_DIRECTION] = [0, 1, 0]
structure_settings[Tags.STRUCTURE_RADIUS_MM] = 4
structure_settings[Tags.STRUCTURE_CURVATURE_FACTOR] = 0.05
structure_settings[Tags.STRUCTURE_RADIUS_VARIATION_FACTOR] = 1
structure_settings[Tags.STRUCTURE_BIFURCATION_LENGTH_MM] = 70
structure_settings[Tags.MOLECULE_COMPOSITION] = TISSUE_LIBRARY.blood()
structure_settings[Tags.CONSIDER_PARTIAL_VOLUME] = True
structure_settings[Tags.STRUCTURE_TYPE] = Tags.VESSEL_STRUCTURE</p>
</div></blockquote>
<dl class="method">
<dt id="simpa.utils.libraries.structure_library.VesselStructure.fill_internal_volume">
<code class="sig-name descname">fill_internal_volume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.VesselStructure.fill_internal_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills self.geometrical_volume of the GeometricalStructure.</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.VesselStructure.get_enclosed_indices">
<code class="sig-name descname">get_enclosed_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.VesselStructure.get_enclosed_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets indices of the voxels that are either entirely or partially occupied by the GeometricalStructure.
:return: mask for a numpy array</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.VesselStructure.get_params_from_settings">
<code class="sig-name descname">get_params_from_settings</code><span class="sig-paren">(</span><em class="sig-param">single_structure_settings</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.VesselStructure.get_params_from_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the parameters required for the specific GeometricalStructure.
:param single_structure_settings: Settings which describe the specific GeometricalStructure.
:return: Tuple of parameters</p>
</dd></dl>

<dl class="method">
<dt id="simpa.utils.libraries.structure_library.VesselStructure.to_settings">
<code class="sig-name descname">to_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simpa.utils.libraries.structure_library.VesselStructure.to_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Settings dictionary which contains all the parameters needed to create the same GeometricalStructure
again.
:return : A tuple containing the settings key and the needed entries</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-simpa.io_handling">
<span id="module-io-handling"></span><h2>Module: io_handling<a class="headerlink" href="#module-simpa.io_handling" title="Permalink to this headline">¶</a></h2>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<span class="target" id="module-simpa.io_handling.io_hdf5"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="function">
<dt id="simpa.io_handling.io_hdf5.load_hdf5">
<code class="sig-prename descclassname">simpa.io_handling.io_hdf5.</code><code class="sig-name descname">load_hdf5</code><span class="sig-paren">(</span><em class="sig-param">file_path</em>, <em class="sig-param">file_dictionary_path='/'</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.io_handling.io_hdf5.load_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a dictionary from an hdf5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> – Path of the file to load the dictionary from.</p></li>
<li><p><strong>file_dictionary_path</strong> – Path in dictionary structure of hdf5 file to lo the dictionary in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simpa.io_handling.io_hdf5.save_hdf5">
<code class="sig-prename descclassname">simpa.io_handling.io_hdf5.</code><code class="sig-name descname">save_hdf5</code><span class="sig-paren">(</span><em class="sig-param">save_item</em>, <em class="sig-param">file_path: str</em>, <em class="sig-param">file_dictionary_path: str = '/'</em>, <em class="sig-param">file_compression: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.io_handling.io_hdf5.save_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a dictionary with arbitrary content or an item of any kind to an hdf5-file with given filepath.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_item</strong> – Dictionary to save.</p></li>
<li><p><strong>file_path</strong> – Path of the file to save the dictionary in.</p></li>
<li><p><strong>file_dictionary_path</strong> – Path in dictionary structure of existing hdf5 file to store the dictionary in.</p></li>
<li><p><strong>file_compression</strong> – possible file compression for the hdf5 output file. Values are: gzip, lzf and szip.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">Null</span></code></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-simpa.io_handling.serialization"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.io_handling.serialization.SIMPASerializer">
<em class="property">class </em><code class="sig-prename descclassname">simpa.io_handling.serialization.</code><code class="sig-name descname">SIMPASerializer</code><a class="headerlink" href="#simpa.io_handling.serialization.SIMPASerializer" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO</p>
<dl class="method">
<dt id="simpa.io_handling.serialization.SIMPASerializer.serialize">
<code class="sig-name descname">serialize</code><span class="sig-paren">(</span><em class="sig-param">_object: object</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.io_handling.serialization.SIMPASerializer.serialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-simpa.log">
<span id="module-log"></span><h2>Module: log<a class="headerlink" href="#module-simpa.log" title="Permalink to this headline">¶</a></h2>
<p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<span class="target" id="module-simpa.log.file_logger"></span><p>SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ
SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)
SPDX-License-Identifier: MIT</p>
<dl class="class">
<dt id="simpa.log.file_logger.Logger">
<em class="property">class </em><code class="sig-prename descclassname">simpa.log.file_logger.</code><code class="sig-name descname">Logger</code><a class="headerlink" href="#simpa.log.file_logger.Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>The SIMPA Logger.
The purpose of this class is to guarantee that the logging Config has been set and that logging strings are written
to the same file throughout the entire simulation pipeline.
Per default, the log file is located in the home directory as defined by Path.home().</p>
<p>The log levels are defined the same way they are in the python logging module:
DEBUG: Detailed information, typically of interest only when diagnosing problems.
INFO: Confirmation that things are working as expected.
WARNING: An indication that something unexpected happened, or indicative of some problem in the near future
(e.g. ‘disk space low’). The software is still working as expected.
ERROR: Due to a more serious problem, the software has not been able to perform some function.
CRITICAL: A serious error, indicating that the program itself may be unable to continue running.</p>
<dl class="method">
<dt id="simpa.log.file_logger.Logger.critical">
<code class="sig-name descname">critical</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.log.file_logger.Logger.critical" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs a critical message to the logging system.
CRITICAL: A serious error, indicating that the program itself may be unable to continue running.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – the message to log</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.log.file_logger.Logger.debug">
<code class="sig-name descname">debug</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.log.file_logger.Logger.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs a debug message to the logging system.
DEBUG: Detailed information, typically of interest only when diagnosing problems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – the message to log</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.log.file_logger.Logger.error">
<code class="sig-name descname">error</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.log.file_logger.Logger.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs an error message to the logging system.
ERROR: Due to a more serious problem, the software has not been able to perform some function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – the message to log</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.log.file_logger.Logger.info">
<code class="sig-name descname">info</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.log.file_logger.Logger.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs an info message to the logging system.
INFO: Confirmation that things are working as expected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – the message to log</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="simpa.log.file_logger.Logger.warning">
<code class="sig-name descname">warning</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="headerlink" href="#simpa.log.file_logger.Logger.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs a warning message to the logging system.
WARNING: An indication that something unexpected happened, or indicative of some problem
in the near future (e.g. ‘disk space low’). The software is still working as expected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – the message to log</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="performing-an-optical-forward-simulation">
<h2>Performing an optical forward simulation<a class="headerlink" href="#performing-an-optical-forward-simulation" title="Permalink to this headline">¶</a></h2>
<p>The file can be found in simpa_examples/minimal_optical_simulation.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ</span>
<span class="sd">SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)</span>
<span class="sd">SPDX-License-Identifier: MIT</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Tags</span><span class="p">,</span> <span class="n">TISSUE_LIBRARY</span>
<span class="kn">from</span> <span class="nn">simpa.core.simulation</span> <span class="kn">import</span> <span class="n">simulate</span>
<span class="kn">from</span> <span class="nn">simpa.utils.settings</span> <span class="kn">import</span> <span class="n">Settings</span>
<span class="kn">from</span> <span class="nn">simpa.visualisation.matplotlib_data_visualisation</span> <span class="kn">import</span> <span class="n">visualise_data</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">simpa.core</span> <span class="kn">import</span> <span class="n">VolumeCreationModelModelBasedAdapter</span><span class="p">,</span> <span class="n">OpticalForwardModelMcxAdapter</span><span class="p">,</span> \
    <span class="n">GaussianNoiseProcessingComponent</span>

<span class="kn">from</span> <span class="nn">simpa.utils.path_manager</span> <span class="kn">import</span> <span class="n">PathManager</span>

<span class="c1"># FIXME temporary workaround for newest Intel architectures</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;KMP_DUPLICATE_LIB_OK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;TRUE&quot;</span>

<span class="c1"># TODO: Please make sure that a valid path_config.env file is located in your home directory, or that you</span>
<span class="c1">#  point to the correct file in the PathManager().</span>
<span class="n">path_manager</span> <span class="o">=</span> <span class="n">PathManager</span><span class="p">()</span>

<span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">VOLUME_PLANAR_DIM_IN_MM</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">VOLUME_HEIGHT_IN_MM</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">SPACING</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">RANDOM_SEED</span> <span class="o">=</span> <span class="mi">471</span>
<span class="n">VOLUME_NAME</span> <span class="o">=</span> <span class="s2">&quot;MyVolumeName_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">RANDOM_SEED</span><span class="p">)</span>

<span class="c1"># If VISUALIZE is set to True, the simulation result will be plotted</span>
<span class="n">VISUALIZE</span> <span class="o">=</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">create_example_tissue</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a very simple example script of how to create a tissue definition.</span>
<span class="sd">    It contains a muscular background, an epidermis layer on top of the muscles</span>
<span class="sd">    and a blood vessel.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">background_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">background_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">1e-4</span><span class="p">,</span> <span class="mf">1e-4</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
    <span class="n">background_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">BACKGROUND</span>

    <span class="n">muscle_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">muscle</span><span class="p">()</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">HORIZONTAL_LAYER_STRUCTURE</span>

    <span class="n">vessel_1_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                                    <span class="mi">10</span><span class="p">,</span>
                                                    <span class="n">VOLUME_HEIGHT_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                                  <span class="mi">12</span><span class="p">,</span>
                                                  <span class="n">VOLUME_HEIGHT_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_RADIUS_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">blood</span><span class="p">()</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">CIRCULAR_TUBULAR_STRUCTURE</span>

    <span class="n">epidermis_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">epidermis</span><span class="p">()</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">HORIZONTAL_LAYER_STRUCTURE</span>

    <span class="n">tissue_dict</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">BACKGROUND</span><span class="p">]</span> <span class="o">=</span> <span class="n">background_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;muscle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">muscle_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;epidermis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">epidermis_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;vessel_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vessel_1_dictionary</span>
    <span class="k">return</span> <span class="n">tissue_dict</span>

<span class="c1"># Seed the numpy random configuration prior to creating the global_settings file in</span>
<span class="c1"># order to ensure that the same volume</span>
<span class="c1"># is generated with the same random seed every time.</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">RANDOM_SEED</span><span class="p">)</span>

<span class="n">general_settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># These parameters set the general propeties of the simulated volume</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RANDOM_SEED</span><span class="p">:</span> <span class="n">RANDOM_SEED</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">VOLUME_NAME</span><span class="p">:</span> <span class="n">VOLUME_NAME</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SIMULATION_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_hdf5_file_save_path</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">:</span> <span class="n">SPACING</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Z_MM</span><span class="p">:</span> <span class="n">VOLUME_HEIGHT_IN_MM</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_X_MM</span><span class="p">:</span> <span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Y_MM</span><span class="p">:</span> <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTHS</span><span class="p">:</span> <span class="p">[</span><span class="mi">798</span><span class="p">],</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DIGITAL_DEVICE_POSITION</span><span class="p">:</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                   <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                   <span class="mi">0</span><span class="p">],</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">LOAD_AND_SAVE_HDF5_FILE_AT_THE_END_OF_SIMULATION_TO_MINIMISE_FILESIZE</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">}</span>

<span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">general_settings</span><span class="p">)</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_volume_creation_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SIMULATE_DEFORMED_LAYERS</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURES</span><span class="p">:</span> <span class="n">create_example_tissue</span><span class="p">()</span>
<span class="p">})</span>
<span class="n">settings</span><span class="o">.</span><span class="n">set_optical_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_NUMBER_PHOTONS</span><span class="p">:</span> <span class="mf">1e7</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_BINARY_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_mcx_binary_path</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_MCX</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ILLUMINATION_TYPE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">ILLUMINATION_TYPE_PENCIL</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">LASER_PULSE_ENERGY_IN_MILLIJOULE</span><span class="p">:</span> <span class="mi">50</span>
<span class="p">})</span>
<span class="n">settings</span><span class="p">[</span><span class="s2">&quot;noise_model_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MEAN</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_STD</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_MULTIPLICATIVE</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_INITIAL_PRESSURE</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_NON_NEGATIVITY_CONSTRAINT</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">}</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">VolumeCreationModelModelBasedAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="n">OpticalForwardModelMcxAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="n">GaussianNoiseProcessingComponent</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s2">&quot;noise_model_1&quot;</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">class</span> <span class="nc">ExampleDeviceSlitIlluminationLinearDetector</span><span class="p">(</span><span class="n">PhotoacousticDevice</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a digital twin of a PA device with a slit as illumination next to a linear detection geometry.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">device_position_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                                        <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_detection_geometry</span><span class="p">(</span><span class="n">LinearArrayDetectionGeometry</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_illumination_geometry</span><span class="p">(</span><span class="n">SlitIlluminationGeometry</span><span class="p">(</span><span class="n">slit_vector_mm</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                                <span class="n">direction_vector_mm</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">ExampleDeviceSlitIlluminationLinearDetector</span><span class="p">()</span>

<span class="n">simulate</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTH</span> <span class="ow">in</span> <span class="n">settings</span><span class="p">:</span>
    <span class="n">WAVELENGTH</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTH</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">WAVELENGTH</span> <span class="o">=</span> <span class="mi">700</span>

<span class="k">if</span> <span class="n">VISUALIZE</span><span class="p">:</span>
    <span class="n">visualise_data</span><span class="p">(</span><span class="n">path_manager</span><span class="o">.</span><span class="n">get_hdf5_file_save_path</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">VOLUME_NAME</span> <span class="o">+</span> <span class="s2">&quot;.hdf5&quot;</span><span class="p">,</span> <span class="n">WAVELENGTH</span><span class="p">,</span>
                   <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="performing-a-complete-forward-simulation-with-acoustic-modeling-optical-modeling-as-well-as-image-reconstruction">
<h2>Performing a complete forward simulation with acoustic modeling, optical modeling, as well as image reconstruction<a class="headerlink" href="#performing-a-complete-forward-simulation-with-acoustic-modeling-optical-modeling-as-well-as-image-reconstruction" title="Permalink to this headline">¶</a></h2>
<p>The file can be found in simpa_examples/optical_and_acoustic_simulation.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ</span>
<span class="sd">SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)</span>
<span class="sd">SPDX-License-Identifier: MIT</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Tags</span><span class="p">,</span> <span class="n">TISSUE_LIBRARY</span>

<span class="kn">from</span> <span class="nn">simpa.core.simulation</span> <span class="kn">import</span> <span class="n">simulate</span>
<span class="kn">from</span> <span class="nn">simpa.utils.settings</span> <span class="kn">import</span> <span class="n">Settings</span>
<span class="kn">from</span> <span class="nn">simpa.visualisation.matplotlib_data_visualisation</span> <span class="kn">import</span> <span class="n">visualise_data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">simpa.utils.path_manager</span> <span class="kn">import</span> <span class="n">PathManager</span>
<span class="kn">from</span> <span class="nn">simpa.core</span> <span class="kn">import</span> <span class="n">ImageReconstructionModuleDelayAndSumAdapter</span><span class="p">,</span> <span class="n">GaussianNoiseProcessingComponent</span><span class="p">,</span> \
    <span class="n">OpticalForwardModelMcxAdapter</span><span class="p">,</span> <span class="n">AcousticForwardModelKWaveAdapter</span><span class="p">,</span> <span class="n">VolumeCreationModelModelBasedAdapter</span><span class="p">,</span> \
    <span class="n">FieldOfViewCroppingProcessingComponent</span><span class="p">,</span> <span class="n">ImageReconstructionModuleSignedDelayMultiplyAndSumAdapter</span><span class="p">,</span> \
    <span class="n">ReconstructionModuleTimeReversalAdapter</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins</span> <span class="kn">import</span> <span class="n">MSOTAcuityEcho</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins</span> <span class="kn">import</span> <span class="n">LinearArrayDetectionGeometry</span><span class="p">,</span> <span class="n">SlitIlluminationGeometry</span><span class="p">,</span> <span class="n">PhotoacousticDevice</span>


<span class="c1"># FIXME temporary workaround for newest Intel architectures</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;KMP_DUPLICATE_LIB_OK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;TRUE&quot;</span>

<span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span> <span class="o">=</span> <span class="mi">75</span>
<span class="n">VOLUME_PLANAR_DIM_IN_MM</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">VOLUME_HEIGHT_IN_MM</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">SPACING</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="n">RANDOM_SEED</span> <span class="o">=</span> <span class="mi">4711</span>

<span class="c1"># TODO: Please make sure that a valid path_config.env file is located in your home directory, or that you</span>
<span class="c1">#  point to the correct file in the PathManager().</span>
<span class="n">path_manager</span> <span class="o">=</span> <span class="n">PathManager</span><span class="p">()</span>

<span class="c1"># If VISUALIZE is set to True, the simulation result will be plotted</span>
<span class="n">VISUALIZE</span> <span class="o">=</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">create_example_tissue</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a very simple example script of how to create a tissue definition.</span>
<span class="sd">    It contains a muscular background, an epidermis layer on top of the muscles</span>
<span class="sd">    and a blood vessel.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">background_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">background_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">1e-10</span><span class="p">,</span> <span class="mf">1e-10</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">background_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">BACKGROUND</span>

    <span class="n">muscle_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">muscle_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">HORIZONTAL_LAYER_STRUCTURE</span>

    <span class="n">vessel_1_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                                    <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_RADIUS_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">blood</span><span class="p">()</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">vessel_1_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">CIRCULAR_TUBULAR_STRUCTURE</span>

    <span class="n">vessel_2_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
                                                    <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_RADIUS_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">blood</span><span class="p">()</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">vessel_2_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">CIRCULAR_TUBULAR_STRUCTURE</span>

    <span class="n">epidermis_dictionary</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">PRIORITY</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_START_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_END_MM</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">MOLECULE_COMPOSITION</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">epidermis</span><span class="p">()</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONSIDER_PARTIAL_VOLUME</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">ADHERE_TO_DEFORMATION</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">epidermis_dictionary</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURE_TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tags</span><span class="o">.</span><span class="n">HORIZONTAL_LAYER_STRUCTURE</span>

    <span class="n">tissue_dict</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">BACKGROUND</span><span class="p">]</span> <span class="o">=</span> <span class="n">background_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;muscle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">muscle_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;epidermis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">epidermis_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;vessel_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vessel_1_dictionary</span>
    <span class="n">tissue_dict</span><span class="p">[</span><span class="s2">&quot;vessel_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vessel_2_dictionary</span>
    <span class="k">return</span> <span class="n">tissue_dict</span>


<span class="c1"># Seed the numpy random configuration prior to creating the global_settings file in</span>
<span class="c1"># order to ensure that the same volume</span>
<span class="c1"># is generated with the same random seed every time.</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">RANDOM_SEED</span><span class="p">)</span>
<span class="n">VOLUME_NAME</span> <span class="o">=</span> <span class="s2">&quot;CompletePipelineTestMSOT_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">RANDOM_SEED</span><span class="p">)</span>

<span class="n">general_settings</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># These parameters set the general properties of the simulated volume</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">RANDOM_SEED</span><span class="p">:</span> <span class="n">RANDOM_SEED</span><span class="p">,</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">VOLUME_NAME</span><span class="p">:</span> <span class="s2">&quot;CompletePipelineTestMSOT_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">RANDOM_SEED</span><span class="p">),</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">SIMULATION_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_hdf5_file_save_path</span><span class="p">(),</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">:</span> <span class="n">SPACING</span><span class="p">,</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Z_MM</span><span class="p">:</span> <span class="n">VOLUME_HEIGHT_IN_MM</span><span class="p">,</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_X_MM</span><span class="p">:</span> <span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="p">,</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Y_MM</span><span class="p">:</span> <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="p">,</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">VOLUME_CREATOR</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">VOLUME_CREATOR_VERSATILE</span><span class="p">,</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">GPU</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>

            <span class="c1"># The following parameters set the optical forward model</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTHS</span><span class="p">:</span> <span class="p">[</span><span class="mi">700</span><span class="p">],</span>
            <span class="n">Tags</span><span class="o">.</span><span class="n">LOAD_AND_SAVE_HDF5_FILE_AT_THE_END_OF_SIMULATION_TO_MINIMISE_FILESIZE</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">general_settings</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">RANDOM_SEED</span><span class="p">)</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_volume_creation_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURES</span><span class="p">:</span> <span class="n">create_example_tissue</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SIMULATE_DEFORMED_LAYERS</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">})</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_optical_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_NUMBER_PHOTONS</span><span class="p">:</span> <span class="mf">1e7</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_BINARY_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_mcx_binary_path</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ILLUMINATION_TYPE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">ILLUMINATION_TYPE_MSOT_ACUITY_ECHO</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">LASER_PULSE_ENERGY_IN_MILLIJOULE</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">MCX_ASSUMED_ANISOTROPY</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_acoustic_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_SIMULATION_3D</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_MODEL_BINARY_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_matlab_binary_path</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_ALPHA_POWER</span><span class="p">:</span> <span class="mf">1.05</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SENSOR_RECORD</span><span class="p">:</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLInside</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLSize</span><span class="p">:</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLAlpha</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PlotPML</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECORDMOVIE</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">MOVIENAME</span><span class="p">:</span> <span class="s2">&quot;visualization_log&quot;</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_LOG_SCALE</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">})</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_reconstruction_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_PERFORM_BANDPASS_FILTERING</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_MODEL_BINARY_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_matlab_binary_path</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_SIMULATION_3D</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_ALPHA_POWER</span><span class="p">:</span> <span class="mf">1.05</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">TUKEY_WINDOW_ALPHA</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">BANDPASS_CUTOFF_LOWPASS</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="mf">8e6</span><span class="p">),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">BANDPASS_CUTOFF_HIGHPASS</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="mf">0.1e4</span><span class="p">),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_BMODE_AFTER_RECONSTRUCTION</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_BMODE_METHOD</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_BMODE_METHOD_HILBERT_TRANSFORM</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_APODIZATION_METHOD</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_APODIZATION_BOX</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_MODE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">RECONSTRUCTION_MODE_PRESSURE</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SENSOR_RECORD</span><span class="p">:</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLInside</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLSize</span><span class="p">:</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PMLAlpha</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PlotPML</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">RECORDMOVIE</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">MOVIENAME</span><span class="p">:</span> <span class="s2">&quot;visualization_log&quot;</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ACOUSTIC_LOG_SCALE</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_SPEED_OF_SOUND</span><span class="p">:</span> <span class="mi">1540</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_ALPHA_COEFF</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">PROPERTY_DENSITY</span><span class="p">:</span> <span class="mi">1000</span>
<span class="p">})</span>

<span class="n">settings</span><span class="p">[</span><span class="s2">&quot;noise_initial_pressure&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MEAN</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_STD</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_MULTIPLICATIVE</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_INITIAL_PRESSURE</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_NON_NEGATIVITY_CONSTRAINT</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">}</span>

<span class="n">settings</span><span class="p">[</span><span class="s2">&quot;noise_time_series&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_STD</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">NOISE_MODE_ADDITIVE</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">DATA_FIELD</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">TIME_SERIES_DATA</span>
<span class="p">}</span>

<span class="c1"># TODO: For the device choice, uncomment the undesired device</span>

<span class="c1"># device = MSOTAcuityEcho(device_position_mm=np.array([VOLUME_TRANSDUCER_DIM_IN_MM/2,</span>
<span class="c1">#                                                      VOLUME_PLANAR_DIM_IN_MM/2,</span>
<span class="c1">#                                                      0]))</span>
<span class="c1"># device.update_settings_for_use_of_model_based_volume_creator(settings)</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">PhotoacousticDevice</span><span class="p">(</span><span class="n">device_position_mm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">VOLUME_TRANSDUCER_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                                          <span class="n">VOLUME_PLANAR_DIM_IN_MM</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                                          <span class="mi">0</span><span class="p">]))</span>
<span class="n">device</span><span class="o">.</span><span class="n">set_detection_geometry</span><span class="p">(</span><span class="n">LinearArrayDetectionGeometry</span><span class="p">(</span><span class="n">device_position_mm</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">device_position_mm</span><span class="p">,</span> <span class="n">pitch_mm</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
                                                           <span class="n">number_detector_elements</span><span class="o">=</span><span class="mi">200</span><span class="p">))</span>
<span class="n">device</span><span class="o">.</span><span class="n">add_illumination_geometry</span><span class="p">(</span><span class="n">SlitIlluminationGeometry</span><span class="p">(</span><span class="n">slit_vector_mm</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>


<span class="n">SIMUATION_PIPELINE</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">VolumeCreationModelModelBasedAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="n">OpticalForwardModelMcxAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="n">GaussianNoiseProcessingComponent</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s2">&quot;noise_initial_pressure&quot;</span><span class="p">),</span>
    <span class="n">AcousticForwardModelKWaveAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="n">GaussianNoiseProcessingComponent</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s2">&quot;noise_time_series&quot;</span><span class="p">),</span>
    <span class="n">ReconstructionModuleTimeReversalAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="p">]</span>

<span class="n">simulate</span><span class="p">(</span><span class="n">SIMUATION_PIPELINE</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTH</span> <span class="ow">in</span> <span class="n">settings</span><span class="p">:</span>
    <span class="n">WAVELENGTH</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTH</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">WAVELENGTH</span> <span class="o">=</span> <span class="mi">700</span>

<span class="k">if</span> <span class="n">VISUALIZE</span><span class="p">:</span>
    <span class="n">visualise_data</span><span class="p">(</span><span class="n">path_manager</span><span class="o">.</span><span class="n">get_hdf5_file_save_path</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">VOLUME_NAME</span> <span class="o">+</span> <span class="s2">&quot;.hdf5&quot;</span><span class="p">,</span> <span class="n">WAVELENGTH</span><span class="p">,</span>
                   <span class="n">show_time_series_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">show_initial_pressure</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">show_absorption</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">show_segmentation_map</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">show_tissue_density</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">show_reconstructed_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">show_fluence</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">log_scale</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-custom-tissue-structures-and-properties">
<h2>Defining custom tissue structures and properties<a class="headerlink" href="#defining-custom-tissue-structures-and-properties" title="Permalink to this headline">¶</a></h2>
<p>The file can be found in simpa_examples/create_custom_tissues.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ</span>
<span class="sd">SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)</span>
<span class="sd">SPDX-License-Identifier: MIT</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">MolecularCompositionGenerator</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">MOLECULE_LIBRARY</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Molecule</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Spectrum</span>
<span class="kn">from</span> <span class="nn">simpa.utils.libraries.spectra_library</span> <span class="kn">import</span> <span class="n">ScatteringSpectrumLibrary</span><span class="p">,</span> <span class="n">AnisotropySpectrumLibrary</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">create_custom_absorber</span><span class="p">():</span>
    <span class="n">wavelengths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">absorber</span> <span class="o">=</span> <span class="n">Spectrum</span><span class="p">(</span><span class="n">spectrum_name</span><span class="o">=</span><span class="s2">&quot;random absorber&quot;</span><span class="p">,</span>
                        <span class="n">wavelengths</span><span class="o">=</span><span class="n">wavelengths</span><span class="p">,</span>
                        <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span>
                                      <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">wavelengths</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">absorber</span>


<span class="k">def</span> <span class="nf">create_custom_chromophore</span><span class="p">(</span><span class="n">volume_fraction</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">):</span>
    <span class="n">chromophore</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">(</span>
            <span class="n">absorption_spectrum</span><span class="o">=</span><span class="n">create_custom_absorber</span><span class="p">(),</span>
            <span class="n">volume_fraction</span><span class="o">=</span><span class="n">volume_fraction</span><span class="p">,</span>
            <span class="n">scattering_spectrum</span><span class="o">=</span><span class="n">ScatteringSpectrumLibrary</span><span class="o">.</span><span class="n">CONSTANT_SCATTERING_ARBITRARY</span><span class="p">(</span><span class="mf">40.0</span><span class="p">),</span>
            <span class="n">anisotropy_spectrum</span><span class="o">=</span><span class="n">AnisotropySpectrumLibrary</span><span class="o">.</span><span class="n">CONSTANT_ANISOTROPY_ARBITRARY</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">chromophore</span>


<span class="k">def</span> <span class="nf">create_custom_tissue_type</span><span class="p">():</span>

    <span class="c1"># First create an instance of a TissueSettingsGenerator</span>
    <span class="n">tissue_settings_generator</span> <span class="o">=</span> <span class="n">MolecularCompositionGenerator</span><span class="p">()</span>

    <span class="n">water_volume_fraction</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="n">blood_volume_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">custom_chromophore_volume_fraction</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="c1"># The volume fraction within every tissue type should sum up to 1.</span>

    <span class="n">oxygenation</span> <span class="o">=</span> <span class="mf">0.4</span>

    <span class="c1"># Then append chromophores that you want</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;oxyhemoglobin&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">oxyhemoglobin</span><span class="p">(</span><span class="n">oxygenation</span> <span class="o">*</span> <span class="n">blood_volume_fraction</span><span class="p">))</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;deoxyhemoglobin&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">deoxyhemoglobin</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">oxygenation</span><span class="p">)</span> <span class="o">*</span> <span class="n">blood_volume_fraction</span><span class="p">))</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;water&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">water</span><span class="p">(</span><span class="n">water_volume_fraction</span><span class="p">))</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">create_custom_chromophore</span><span class="p">(</span><span class="n">custom_chromophore_volume_fraction</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">tissue_settings_generator</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-a-custom-digital-device-twin-class">
<h2>Defining a custom digital device twin class<a class="headerlink" href="#defining-a-custom-digital-device-twin-class" title="Permalink to this headline">¶</a></h2>
<p>The file can be found in simpa_examples/create_a_custom_digital_device_twin.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ</span>
<span class="sd">SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)</span>
<span class="sd">SPDX-License-Identifier: MIT</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># FIXME temporary workaround for newest Intel architectures</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;KMP_DUPLICATE_LIB_OK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;TRUE&quot;</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins.digital_device_twin_base</span> <span class="kn">import</span> <span class="n">PhotoacousticDevice</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins.devices.illumination_geometries.slit_illumination</span> <span class="kn">import</span> <span class="n">SlitIlluminationGeometry</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins.devices.detection_geometries.linear_array</span> <span class="kn">import</span> <span class="n">LinearArrayDetectionGeometry</span>

<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Settings</span><span class="p">,</span> <span class="n">Tags</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">class</span> <span class="nc">ExampleDeviceSlitIlluminationLinearDetector</span><span class="p">(</span><span class="n">PhotoacousticDevice</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a digital twin of a PA device with a slit as illumination next to a linear detection geometry.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_detection_geometry</span><span class="p">(</span><span class="n">LinearArrayDetectionGeometry</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_illumination_geometry</span><span class="p">(</span><span class="n">SlitIlluminationGeometry</span><span class="p">())</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">ExampleDeviceSlitIlluminationLinearDetector</span><span class="p">()</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
    <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_X_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Y_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Z_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">STRUCTURES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">x_dim</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_X_MM</span><span class="p">]</span><span class="o">/</span><span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">]))</span>
    <span class="n">z_dim</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Z_MM</span><span class="p">]</span><span class="o">/</span><span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">]))</span>

    <span class="n">positions</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get_detection_geometry</span><span class="p">()</span><span class="o">.</span><span class="n">get_detector_element_positions_accounting_for_device_position_mm</span><span class="p">()</span>
    <span class="n">detector_elements</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get_detection_geometry</span><span class="p">()</span><span class="o">.</span><span class="n">get_detector_element_orientations</span><span class="p">(</span><span class="n">global_settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">positions</span><span class="o">/</span><span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">positions</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">positions</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">detector_elements</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">detector_elements</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-custom-tissue-types">
<h2>Defining custom tissue types<a class="headerlink" href="#defining-custom-tissue-types" title="Permalink to this headline">¶</a></h2>
<p>The file can be found in simpa_examples/create_custom_tissues.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ</span>
<span class="sd">SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)</span>
<span class="sd">SPDX-License-Identifier: MIT</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">MolecularCompositionGenerator</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">MOLECULE_LIBRARY</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Molecule</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Spectrum</span>
<span class="kn">from</span> <span class="nn">simpa.utils.libraries.spectra_library</span> <span class="kn">import</span> <span class="n">ScatteringSpectrumLibrary</span><span class="p">,</span> <span class="n">AnisotropySpectrumLibrary</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">create_custom_absorber</span><span class="p">():</span>
    <span class="n">wavelengths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">absorber</span> <span class="o">=</span> <span class="n">Spectrum</span><span class="p">(</span><span class="n">spectrum_name</span><span class="o">=</span><span class="s2">&quot;random absorber&quot;</span><span class="p">,</span>
                        <span class="n">wavelengths</span><span class="o">=</span><span class="n">wavelengths</span><span class="p">,</span>
                        <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span>
                                      <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">wavelengths</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">absorber</span>


<span class="k">def</span> <span class="nf">create_custom_chromophore</span><span class="p">(</span><span class="n">volume_fraction</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">):</span>
    <span class="n">chromophore</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">(</span>
            <span class="n">absorption_spectrum</span><span class="o">=</span><span class="n">create_custom_absorber</span><span class="p">(),</span>
            <span class="n">volume_fraction</span><span class="o">=</span><span class="n">volume_fraction</span><span class="p">,</span>
            <span class="n">scattering_spectrum</span><span class="o">=</span><span class="n">ScatteringSpectrumLibrary</span><span class="o">.</span><span class="n">CONSTANT_SCATTERING_ARBITRARY</span><span class="p">(</span><span class="mf">40.0</span><span class="p">),</span>
            <span class="n">anisotropy_spectrum</span><span class="o">=</span><span class="n">AnisotropySpectrumLibrary</span><span class="o">.</span><span class="n">CONSTANT_ANISOTROPY_ARBITRARY</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">chromophore</span>


<span class="k">def</span> <span class="nf">create_custom_tissue_type</span><span class="p">():</span>

    <span class="c1"># First create an instance of a TissueSettingsGenerator</span>
    <span class="n">tissue_settings_generator</span> <span class="o">=</span> <span class="n">MolecularCompositionGenerator</span><span class="p">()</span>

    <span class="n">water_volume_fraction</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="n">blood_volume_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">custom_chromophore_volume_fraction</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="c1"># The volume fraction within every tissue type should sum up to 1.</span>

    <span class="n">oxygenation</span> <span class="o">=</span> <span class="mf">0.4</span>

    <span class="c1"># Then append chromophores that you want</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;oxyhemoglobin&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">oxyhemoglobin</span><span class="p">(</span><span class="n">oxygenation</span> <span class="o">*</span> <span class="n">blood_volume_fraction</span><span class="p">))</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;deoxyhemoglobin&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">deoxyhemoglobin</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">oxygenation</span><span class="p">)</span> <span class="o">*</span> <span class="n">blood_volume_fraction</span><span class="p">))</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;water&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">water</span><span class="p">(</span><span class="n">water_volume_fraction</span><span class="p">))</span>
    <span class="n">tissue_settings_generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span>
                                     <span class="n">value</span><span class="o">=</span><span class="n">create_custom_chromophore</span><span class="p">(</span><span class="n">custom_chromophore_volume_fraction</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">tissue_settings_generator</span>
</pre></div>
</div>
</div>
<div class="section" id="load-a-segmentation-mask-and-use-it-to-simulate">
<h2>Load a segmentation mask and use it to simulate<a class="headerlink" href="#load-a-segmentation-mask-and-use-it-to-simulate" title="Permalink to this headline">¶</a></h2>
<p>The file can be found in simpa_examples/segmentation_loader.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SPDX-FileCopyrightText: 2021 Computer Assisted Medical Interventions Group, DKFZ</span>
<span class="sd">SPDX-FileCopyrightText: 2021 VISION Lab, Cancer Research UK Cambridge Institute (CRUK CI)</span>
<span class="sd">SPDX-License-Identifier: MIT</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">simpa.core.simulation</span> <span class="kn">import</span> <span class="n">simulate</span>
<span class="kn">from</span> <span class="nn">simpa.utils.settings</span> <span class="kn">import</span> <span class="n">Settings</span>
<span class="kn">from</span> <span class="nn">simpa.utils</span> <span class="kn">import</span> <span class="n">Tags</span><span class="p">,</span> <span class="n">SegmentationClasses</span><span class="p">,</span> <span class="n">MolecularCompositionGenerator</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage.data</span> <span class="kn">import</span> <span class="n">shepp_logan_phantom</span>
<span class="kn">from</span> <span class="nn">simpa.utils.libraries.tissue_library</span> <span class="kn">import</span> <span class="n">TISSUE_LIBRARY</span>
<span class="kn">from</span> <span class="nn">simpa.utils.libraries.molecule_library</span> <span class="kn">import</span> <span class="n">MOLECULE_LIBRARY</span>
<span class="kn">from</span> <span class="nn">simpa.visualisation.matplotlib_data_visualisation</span> <span class="kn">import</span> <span class="n">visualise_data</span>
<span class="kn">from</span> <span class="nn">scipy.ndimage</span> <span class="kn">import</span> <span class="n">zoom</span>
<span class="kn">from</span> <span class="nn">simpa.utils.path_manager</span> <span class="kn">import</span> <span class="n">PathManager</span>
<span class="kn">from</span> <span class="nn">simpa.core.device_digital_twins</span> <span class="kn">import</span> <span class="n">RSOMExplorerP50</span>
<span class="kn">from</span> <span class="nn">simpa.core</span> <span class="kn">import</span> <span class="n">VolumeCreationModuleSegmentationBasedAdapter</span><span class="p">,</span> <span class="n">OpticalForwardModelMcxAdapter</span>

<span class="c1"># FIXME temporary workaround for newest Intel architectures</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;KMP_DUPLICATE_LIB_OK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;TRUE&quot;</span>

<span class="c1"># If VISUALIZE is set to True, the simulation result will be plotted</span>
<span class="n">VISUALIZE</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># TODO: Please make sure that a valid path_config.env file is located in your home directory, or that you</span>
<span class="c1">#  point to the correct file in the PathManager().</span>
<span class="n">path_manager</span> <span class="o">=</span> <span class="n">PathManager</span><span class="p">()</span>

<span class="n">target_spacing</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="n">label_mask</span> <span class="o">=</span> <span class="n">shepp_logan_phantom</span><span class="p">()</span>

<span class="n">label_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">digitize</span><span class="p">(</span><span class="n">label_mask</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">right</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">label_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">label_mask</span><span class="p">,</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>

<span class="n">input_spacing</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">segmentation_volume_tiled</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">label_mask</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">segmentation_volume_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">zoom</span><span class="p">(</span><span class="n">segmentation_volume_tiled</span><span class="p">,</span> <span class="n">input_spacing</span><span class="o">/</span><span class="n">target_spacing</span><span class="p">,</span>
                                         <span class="n">order</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">segmention_class_mapping</span><span class="p">():</span>
    <span class="n">ret_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">heavy_water</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">blood</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">epidermis</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">muscle</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">mediprene</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">ultrasound_gel</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">heavy_water</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">MolecularCompositionGenerator</span><span class="p">()</span>
                   <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">oxyhemoglobin</span><span class="p">(</span><span class="mf">0.01</span><span class="p">))</span>
                   <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">deoxyhemoglobin</span><span class="p">(</span><span class="mf">0.01</span><span class="p">))</span>
                   <span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MOLECULE_LIBRARY</span><span class="o">.</span><span class="n">water</span><span class="p">(</span><span class="mf">0.98</span><span class="p">))</span>
                   <span class="o">.</span><span class="n">get_molecular_composition</span><span class="p">(</span><span class="n">SegmentationClasses</span><span class="o">.</span><span class="n">COUPLING_ARTIFACT</span><span class="p">))</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">heavy_water</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">heavy_water</span><span class="p">()</span>
    <span class="n">ret_dict</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="n">TISSUE_LIBRARY</span><span class="o">.</span><span class="n">heavy_water</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ret_dict</span>


<span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">SIMULATION_PATH</span><span class="p">]</span> <span class="o">=</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_hdf5_file_save_path</span><span class="p">()</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">VOLUME_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SegmentationTest&quot;</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">RANDOM_SEED</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTHS</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">700</span><span class="p">]</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">SPACING_MM</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_spacing</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_X_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">400</span> <span class="o">/</span> <span class="p">(</span><span class="n">target_spacing</span> <span class="o">/</span> <span class="n">input_spacing</span><span class="p">)</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Y_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">128</span> <span class="o">/</span> <span class="p">(</span><span class="n">target_spacing</span> <span class="o">/</span> <span class="n">input_spacing</span><span class="p">)</span>
<span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">DIM_VOLUME_Z_MM</span><span class="p">]</span> <span class="o">=</span> <span class="mi">400</span> <span class="o">/</span> <span class="p">(</span><span class="n">target_spacing</span> <span class="o">/</span> <span class="n">input_spacing</span><span class="p">)</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_volume_creation_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">INPUT_SEGMENTATION_VOLUME</span><span class="p">:</span> <span class="n">segmentation_volume_mask</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">SEGMENTATION_CLASS_MAPPING</span><span class="p">:</span> <span class="n">segmention_class_mapping</span><span class="p">(),</span>

<span class="p">})</span>

<span class="n">settings</span><span class="o">.</span><span class="n">set_optical_settings</span><span class="p">({</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_NUMBER_PHOTONS</span><span class="p">:</span> <span class="mf">1e7</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">OPTICAL_MODEL_BINARY_PATH</span><span class="p">:</span> <span class="n">path_manager</span><span class="o">.</span><span class="n">get_mcx_binary_path</span><span class="p">(),</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">ILLUMINATION_TYPE</span><span class="p">:</span> <span class="n">Tags</span><span class="o">.</span><span class="n">ILLUMINATION_TYPE_MSOT_ACUITY_ECHO</span><span class="p">,</span>
    <span class="n">Tags</span><span class="o">.</span><span class="n">LASER_PULSE_ENERGY_IN_MILLIJOULE</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">VolumeCreationModuleSegmentationBasedAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">),</span>
    <span class="n">OpticalForwardModelMcxAdapter</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">simulate</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">RSOMExplorerP50</span><span class="p">(</span><span class="n">element_spacing_mm</span><span class="o">=</span><span class="mf">1.0</span><span class="p">))</span>

<span class="k">if</span> <span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTH</span> <span class="ow">in</span> <span class="n">settings</span><span class="p">:</span>
    <span class="n">WAVELENGTH</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">WAVELENGTH</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">WAVELENGTH</span> <span class="o">=</span> <span class="mi">700</span>

<span class="k">if</span> <span class="n">VISUALIZE</span><span class="p">:</span>
    <span class="n">visualise_data</span><span class="p">(</span><span class="n">path_manager</span><span class="o">.</span><span class="n">get_hdf5_file_save_path</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="s2">&quot;SegmentationTest&quot;</span> <span class="o">+</span> <span class="s2">&quot;.hdf5&quot;</span><span class="p">,</span> <span class="n">WAVELENGTH</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">SIMPA</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>